{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Vandelay","text":"<p>An always-on AI agent platform built on Agno.</p> <p>Vandelay gives you a self-hosted AI agent that runs 24/7, with memory, tools, scheduling, and multi-channel access out of the box.</p>"},{"location":"#why-vandelay","title":"Why Vandelay?","text":"<ul> <li>Always on: Runs as a daemon with heartbeat, cron jobs, and proactive scheduling</li> <li>Self-hosted first: Your data stays on your server. No cloud lock-in.</li> <li>Multi-channel: Terminal, Telegram, WhatsApp, WebSocket - same agent, shared memory</li> <li>Team mode: Supervisor delegates to specialist agents with scoped tools</li> <li>Extensible: 117 tools from Agno's ecosystem, plus custom tool authoring</li> <li>TUI dashboard: Full command centre \u2014 chat, config, scheduler, agents, status in one place</li> </ul>"},{"location":"#quick-install","title":"Quick Install","text":"<pre><code>git clone https://github.com/shaunymca/vandelay.git\ncd vandelay\nuv sync\nuv tool install -e .\nvandelay\n</code></pre>"},{"location":"#whats-inside","title":"What's Inside","text":"Feature Description TUI Dashboard Chat, config, agents, scheduler, and live status \u2014 all in one place Agent Teams Supervisor + specialist agents with tool-scoped delegation Memory Session history, agentic memory, workspace files Knowledge/RAG Document ingestion, vector search, embedder auto-resolution Scheduling Cron jobs, heartbeat with active hours \u2014 configurable from the TUI Channels Terminal, Telegram, WhatsApp, WebSocket Safety Trust/confirm/tiered modes, blocked patterns, sandboxing Browser Control Anti-detect Firefox via Camoufox Deployment systemd daemon, VPS guides, security hardening"},{"location":"#get-started","title":"Get Started","text":"<p>Ready to go? Head to the Getting Started guide.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to Vandelay are documented here.</p>"},{"location":"changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#2026-02-21-tool-integration-fixes","title":"2026-02-21 \u2014 Tool Integration Fixes","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>CamoufoxTools: sync API so functions are visible to agents (<code>d040025</code>)</li> </ul> <p>CamoufoxTools methods were defined as <code>async def</code>, which placed them in Agno's   <code>async_functions</code> registry. In some delegation paths the agent framework only   consulted <code>functions</code> (the sync registry), so the browser functions were never   forwarded to the model \u2014 even though the toolkit appeared in the config.</p> <p>All methods are now regular <code>def</code> using <code>camoufox.sync_api.Camoufox</code>. Agno's   <code>get_async_functions()</code> merges both registries (sync wins, async overrides), so   sync-only tools are now visible in every execution context.</p> <p>Verified: CTO agent called <code>open_tab(\"https://example.com\")</code> and returned   \"Example Domain\" \u2014 confirmed via AgentOS trace <code>caa94195b72b15be6478d9fa4cc71a76</code>.</p> <ul> <li>Gmail missing <code>gmail.compose</code> scope (<code>e22ca64</code>)</li> </ul> <p>Agno's <code>GmailTools</code> checks for the literal string <code>\"gmail.compose\"</code> in the   granted scopes. Our OAuth flow included <code>gmail.modify</code> (a superset), but not   the literal <code>gmail.compose</code> string \u2014 so Agno skipped the tool at startup.</p> <p>Fixed by adding <code>gmail.compose</code> and <code>gmail.send</code> to <code>_google_all_scopes()</code> and   the CLI <code>auth-google</code> scope list.</p> <ul> <li>GoogleDriveTools: <code>auth_port=0</code> treated as \"not set\" (<code>e22ca64</code>)</li> </ul> <p>Agno's <code>GoogleDriveTools.__init__</code> calls <code>if not self.auth_port: raise ValueError(...)</code>.   Passing <code>auth_port=0</code> is falsy, so it always raised. Changed default to <code>8765</code>.</p> <ul> <li>Auto-install missing tool deps on startup (<code>59b4037</code>)</li> </ul> <p>Tools listed in <code>enabled_tools</code> that had missing Python packages were silently   skipped at server start. Now, if a tool's dependencies are not installed, the   server installs them automatically before loading the tool \u2014 the same behaviour   as running <code>vandelay tools enable &lt;name&gt;</code> manually.</p> <ul> <li>CamoufoxTools GeoIP database (manual step)</li> </ul> <p>Camoufox requires a GeoIP database. Download with:   <pre><code>uv run python -m camoufox fetch\n</code></pre></p>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Logging: timestamps on daemon and server output (<code>7102d22</code>)</li> </ul> <p>All log lines now include an ISO timestamp (<code>2026-02-21 06:00:00</code>), making it   easier to correlate daemon logs with AgentOS traces.</p> <ul> <li>Tool instantiation failures now logged at WARNING (<code>05c62db</code>)</li> </ul> <p>Previously logged at DEBUG and invisible in default log levels. Now surfaced   at WARNING so config/dependency problems are immediately visible.</p>"},{"location":"changelog/#2026-02-15-camoufox-google-oauth-unification","title":"2026-02-15 \u2014 Camoufox + Google OAuth Unification","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Google OAuth unified auth flow \u2014 single <code>vandelay auth-google</code> command   covers Gmail, Calendar, Drive, and Sheets</li> <li>Headless OAuth \u2014 console-based flow for servers without a browser</li> <li>Camoufox browser toolkit \u2014 anti-detect Firefox via <code>camoufox[geoip]</code>   (replaces old Node.js/HTTP approach)</li> <li>Daemon restart from <code>/config</code> \u2014 detects running daemon, offers restart</li> </ul>"},{"location":"changelog/#2026-01-28-stage-7b-daemon-self-restart","title":"2026-01-28 \u2014 Stage 7b: Daemon + Self-Restart","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li><code>vandelay daemon install/uninstall/start/stop/restart/status/logs</code></li> <li>Linux (systemd), macOS (launchd), Windows (PID file + detached subprocess)</li> <li><code>restart_daemon()</code> / <code>is_daemon_running()</code> public API</li> <li>14 starter agent templates (CTO, Sales, Marketer, PA, Chef, Trainer, \u2026)</li> <li>OpenRouter provider support</li> <li>Knowledge/RAG with LanceDB + auto-resolved embedder</li> </ul>"},{"location":"changelog/#2026-01-10-stage-6-scheduler-heartbeat","title":"2026-01-10 \u2014 Stage 6: Scheduler + Heartbeat","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>Cron job store (<code>~/.vandelay/cron_jobs.json</code>)</li> <li><code>vandelay scheduler add/list/remove</code> CLI</li> <li>Heartbeat: configurable interval, active hours, timezone</li> <li>Task queue (<code>~/.vandelay/task_queue.json</code>) with priority levels</li> <li>Deep Work: autonomous background sessions with progress reporting</li> </ul>"},{"location":"changelog/#2026-01-01-stage-4-5-channels-browser","title":"2026-01-01 \u2014 Stage 4-5: Channels + Browser","text":""},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Telegram channel (webhook + polling)</li> <li>WhatsApp channel (Meta Cloud API)</li> <li>Browser toolkit (initial Camoufox integration)</li> <li>Safety system: trust / confirm / tiered modes</li> </ul>"},{"location":"changelog/#2025-12-15-stage-1-3-foundation","title":"2025-12-15 \u2014 Stage 1-3: Foundation","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>CLI (<code>vandelay chat</code>, <code>vandelay config</code>, <code>vandelay onboard</code>)</li> <li>FastAPI server + WebSocket terminal (<code>/ws/terminal</code>)</li> <li>Shell, File, Python toolkits</li> <li>SQLite-backed memory and session storage</li> <li>Agent team supervisor (Agno teams)</li> <li><code>vandelay tools enable/disable/list</code> hot-reload</li> </ul>"},{"location":"docs-update-plan/","title":"Docs Update Plan","text":"<p>Branch: <code>docs-update</code> Audit date: 2026-02-25 Based on: commit 85a8114</p>"},{"location":"docs-update-plan/#priority-1-critical-wrong-or-broken","title":"Priority 1 \u2014 Critical (Wrong or Broken)","text":"File Issue Fix <code>docs/cli/tools.md</code> Commands documented as <code>enable/disable/search</code> \u2014 none exist. Actual: <code>add/remove/list/browse/info/refresh/create/auth-google</code> Full rewrite <code>docs/cli/daemon.md</code> Says Windows \"not supported (use WSL)\" \u2014 Windows IS supported via PID file + detached subprocess (PR #80) Update Windows section <code>docs/cli/start.md</code> <code>--no-terminal</code> flag doesn't exist; actual flag is <code>--server</code>. Missing <code>--watch</code> flag Fix flag names, add <code>--watch</code> <code>docs/concepts/memory.md</code> Says MEMORY.md is loaded into the system prompt \u2014 removed in PR #78 (DB-only memory now) Remove that section <code>docs/guides/workspace-files.md</code> Lists 7 workspace files including MEMORY.md \u2014 now 6 files (MEMORY.md no longer in system prompt) Update count, remove MEMORY.md entry <code>docs/concepts/architecture.md</code> Same 7-file count issue Update to 6 files"},{"location":"docs-update-plan/#priority-2-missing-feature-exists-no-docs","title":"Priority 2 \u2014 Missing (Feature Exists, No Docs)","text":""},{"location":"docs-update-plan/#new-files-to-create","title":"New files to create","text":"File Content <code>docs/cli/update.md</code> <code>vandelay update</code> \u2014 git pull + uv sync + optional daemon restart. Flags: <code>--no-restart</code>. When to use it. <code>docs/cli/status.md</code> <code>vandelay status</code> \u2014 shows agent name, model, provider, safety mode, timezone, DB path, workspace dir, enabled channels, team members, server URL <code>docs/guides/tui-guide.md</code> Full TUI dashboard guide: tab-by-tab walkthrough covering Chat, Agents, Knowledge, Memory, Config, Scheduler, Status, Workspace tabs. Includes onboarding wizard steps."},{"location":"docs-update-plan/#priority-3-gaps-documented-but-incomplete","title":"Priority 3 \u2014 Gaps (Documented but Incomplete)","text":"File Gap Fix <code>docs/getting-started/quickstart.md</code> TUI is now the primary entry point. Onboarding runs inside the TUI (5-step wizard), not as a post-exit CLI flow. Flow description is outdated. Rewrite to reflect TUI-first flow <code>docs/concepts/teams.md</code> Doesn't mention how to change team mode (coordinate/route/broadcast/tasks) via TUI Agents tab. Leader now has direct tool access (PR #92). Add TUI workflow section, add note on leader tools <code>docs/guides/scheduling.md</code> TUI Scheduler tab exists with full CRUD for cron jobs and task history \u2014 not mentioned at all Add \"Managing Schedules in the TUI\" section <code>docs/cli/tools.md</code> (after rewrite) <code>auth-google</code>, <code>browse</code>, <code>refresh</code>, <code>info</code>, <code>create</code> subcommands undocumented Include all 8 subcommands <code>docs/cli/onboard.md</code> <code>--non-interactive</code> flag not documented Add flag + use case (headless/CI)"},{"location":"docs-update-plan/#priority-4-polish","title":"Priority 4 \u2014 Polish","text":"<ul> <li><code>docs/guides/agent-templates.md</code> \u2014 template count says 14, actual is 16. Update count and list.</li> <li><code>docs/concepts/channels.md</code> \u2014 WhatsApp labeled \"Untested\"; it's implemented (PR #53), file sending is a known stub. Update label to reflect actual status.</li> <li><code>docs/concepts/teams.md</code> \u2014 Add note that the team leader now receives all user-enabled tools directly (PR #92), so it can execute tasks without delegating when appropriate.</li> </ul>"},{"location":"docs-update-plan/#out-of-scope-accurate-no-changes-needed","title":"Out of Scope (Accurate, No Changes Needed)","text":"<ul> <li><code>docs/configuration/index.md</code> \u2014 config reference is accurate</li> <li><code>docs/guides/scheduling.md</code> cron CLI section \u2014 accurate</li> <li><code>docs/guides/custom-tools.md</code> \u2014 accurate</li> <li><code>docs/deployment/</code> \u2014 accurate</li> <li><code>docs/changelog.md</code> \u2014 leave history as-is</li> </ul>"},{"location":"docs-update-plan/#file-change-summary","title":"File Change Summary","text":"<p>Modified (12): - <code>docs/cli/tools.md</code> \u2014 full rewrite - <code>docs/cli/daemon.md</code> \u2014 Windows support fix - <code>docs/cli/start.md</code> \u2014 flag name fixes - <code>docs/cli/onboard.md</code> \u2014 add <code>--non-interactive</code> - <code>docs/concepts/memory.md</code> \u2014 remove MEMORY.md system prompt claim - <code>docs/concepts/architecture.md</code> \u2014 7 \u2192 6 workspace files - <code>docs/concepts/teams.md</code> \u2014 TUI workflow + leader tools note - <code>docs/concepts/channels.md</code> \u2014 WhatsApp label - <code>docs/guides/workspace-files.md</code> \u2014 7 \u2192 6 files, remove MEMORY.md entry - <code>docs/guides/agent-templates.md</code> \u2014 template count 14 \u2192 16 - <code>docs/guides/scheduling.md</code> \u2014 add TUI Scheduler section - <code>docs/getting-started/quickstart.md</code> \u2014 TUI-first onboarding flow</p> <p>Created (3): - <code>docs/cli/update.md</code> - <code>docs/cli/status.md</code> - <code>docs/guides/tui-guide.md</code></p>"},{"location":"cli/","title":"CLI Reference","text":"<p>Vandelay is managed through the <code>vandelay</code> CLI. Running it with no arguments opens the TUI dashboard.</p>"},{"location":"cli/#global-usage","title":"Global Usage","text":"<pre><code>vandelay [command] [options]\n</code></pre> <p>Running <code>vandelay</code> with no subcommand opens the TUI dashboard \u2014 the recommended entry point. The onboarding wizard launches automatically on first run if no config exists.</p>"},{"location":"cli/#commands","title":"Commands","text":"Command Description (no args) Open the TUI dashboard (onboards automatically on first run) <code>onboard</code> CLI setup wizard (headless/scripted use) <code>start</code> Start the agent server and terminal chat <code>config</code> Interactive configuration editor <code>tools</code> Manage tools (enable, disable, list, search) <code>cron</code> Manage cron jobs <code>knowledge</code> Manage knowledge/RAG corpus <code>memory</code> View and manage agent memory <code>daemon</code> Install and manage the background daemon <code>auth-google</code> Google OAuth authentication flow <code>--version</code> Show version <code>--help</code> Show help"},{"location":"cli/config/","title":"vandelay config","text":"<p>Interactive configuration editor with a menu-driven interface.</p>"},{"location":"cli/config/#usage","title":"Usage","text":"<pre><code>vandelay config\n</code></pre>"},{"location":"cli/config/#menu-structure","title":"Menu Structure","text":"<pre><code>Config\n\u251c\u2500\u2500 Model: Provider, model ID, API key\n\u251c\u2500\u2500 Agent: Name, user ID, timezone\n\u251c\u2500\u2500 Tools: Enable/disable tools\n\u251c\u2500\u2500 Safety: Safety mode, allowed commands, blocked patterns\n\u251c\u2500\u2500 Channels: Telegram, WhatsApp settings\n\u251c\u2500\u2500 Heartbeat: Enable, interval, active hours\n\u251c\u2500\u2500 Team: Enable, members, add/remove members\n\u251c\u2500\u2500 Knowledge: Enable, embedder settings\n\u251c\u2500\u2500 Deep Work: Enable, activation mode, limits\n\u2514\u2500\u2500 Server: Host, port, secret key\n</code></pre>"},{"location":"cli/config/#features","title":"Features","text":"<ul> <li>Live editing: Changes are written to <code>config.json</code> immediately</li> <li>Daemon restart: If a daemon is running, offers to restart it to apply changes</li> <li>Model picker: Fetches available models from your provider in real time</li> <li>Template picker: Browse 14 starter templates when adding team members</li> <li>Member model editing: Override model provider/ID per team member</li> </ul>"},{"location":"cli/config/#config-file","title":"Config File","text":"<p>All changes are persisted to <code>~/.vandelay/config.json</code>. See the Configuration Reference for the full schema.</p>"},{"location":"cli/cron/","title":"vandelay cron","text":"<p>Manage cron jobs from the command line.</p>"},{"location":"cli/cron/#usage","title":"Usage","text":"<pre><code>vandelay cron &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/cron/#subcommands","title":"Subcommands","text":""},{"location":"cli/cron/#list","title":"<code>list</code>","text":"<p>List all cron jobs:</p> <pre><code>vandelay cron list\n</code></pre>"},{"location":"cli/cron/#add","title":"<code>add</code>","text":"<p>Create a new cron job:</p> <pre><code>vandelay cron add --name \"morning-email\" --schedule \"0 8 * * *\" --command \"Check my email and summarize anything important\"\n</code></pre> Flag Required Description <code>--name</code> Yes Unique job identifier <code>--schedule</code> Yes Cron expression (5-field) <code>--command</code> Yes The message to send to the agent"},{"location":"cli/cron/#remove","title":"<code>remove</code>","text":"<p>Remove a cron job:</p> <pre><code>vandelay cron remove morning-email\n</code></pre>"},{"location":"cli/cron/#pause-resume","title":"<code>pause</code> / <code>resume</code>","text":"<p>Pause or resume a cron job:</p> <pre><code>vandelay cron pause morning-email\nvandelay cron resume morning-email\n</code></pre>"},{"location":"cli/cron/#cron-expressions","title":"Cron Expressions","text":"<p>Standard 5-field format: <code>minute hour day month weekday</code></p> Expression Meaning <code>0 8 * * *</code> Daily at 8:00 AM <code>0 9 * * 1</code> Mondays at 9:00 AM <code>*/30 * * * *</code> Every 30 minutes <code>0 19 * * 1-5</code> Weekdays at 7:00 PM <code>0 0 1 * *</code> First of every month at midnight"},{"location":"cli/cron/#storage","title":"Storage","text":"<p>Jobs are persisted in <code>~/.vandelay/cron_jobs.json</code> and restored on startup.</p>"},{"location":"cli/cron/#agent-created-jobs","title":"Agent-Created Jobs","text":"<p>The agent can also create cron jobs via chat using the <code>schedule_job()</code> tool. These appear in <code>vandelay cron list</code> alongside CLI-created jobs.</p>"},{"location":"cli/daemon/","title":"vandelay daemon","text":"<p>Install and manage the background daemon for 24/7 operation.</p>"},{"location":"cli/daemon/#usage","title":"Usage","text":"<pre><code>vandelay daemon &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/daemon/#subcommands","title":"Subcommands","text":""},{"location":"cli/daemon/#install","title":"<code>install</code>","text":"<p>Install the daemon as a system service:</p> <pre><code>vandelay daemon install\n</code></pre> <ul> <li>Linux: Creates a systemd user unit (<code>~/.config/systemd/user/vandelay.service</code>)</li> <li>macOS: Creates a launchd plist (<code>~/Library/LaunchAgents/com.vandelay.agent.plist</code>)</li> <li>Windows: Creates a PID file at <code>~/.vandelay/vandelay.pid</code> and launches a detached background process</li> </ul>"},{"location":"cli/daemon/#uninstall","title":"<code>uninstall</code>","text":"<p>Remove the daemon service:</p> <pre><code>vandelay daemon uninstall\n</code></pre>"},{"location":"cli/daemon/#start-stop-restart","title":"<code>start</code> / <code>stop</code> / <code>restart</code>","text":"<p>Control the daemon:</p> <pre><code>vandelay daemon start\nvandelay daemon stop\nvandelay daemon restart\n</code></pre>"},{"location":"cli/daemon/#status","title":"<code>status</code>","text":"<p>Check if the daemon is running:</p> <pre><code>vandelay daemon status\n</code></pre>"},{"location":"cli/daemon/#logs","title":"<code>logs</code>","text":"<p>View daemon logs:</p> <pre><code>vandelay daemon logs\nvandelay daemon logs --follow  # Tail logs\n</code></pre>"},{"location":"cli/daemon/#how-it-works","title":"How It Works","text":"<p>The daemon runs <code>vandelay start --server</code> as a background service. It:</p> <ul> <li>Starts the FastAPI server</li> <li>Processes messages from all channels</li> <li>Runs the scheduler engine for cron jobs and heartbeat</li> <li>Restarts automatically if it crashes</li> </ul>"},{"location":"cli/daemon/#working-directory","title":"Working Directory","text":"<p>The daemon runs from the user's home directory (<code>~</code>), not from <code>~/.vandelay</code>. This ensures tools like <code>shell</code> and <code>file</code> operate relative to the home directory.</p>"},{"location":"cli/daemon/#manual-control","title":"Manual Control","text":"<p>On Linux, you can also manage the daemon directly:</p> <pre><code>systemctl --user start vandelay\nsystemctl --user stop vandelay\nsystemctl --user restart vandelay\nsystemctl --user status vandelay\njournalctl --user -u vandelay -f  # Tail logs\n</code></pre>"},{"location":"cli/knowledge/","title":"vandelay knowledge","text":"<p>Manage the knowledge/RAG corpus.</p>"},{"location":"cli/knowledge/#usage","title":"Usage","text":"<pre><code>vandelay knowledge &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/knowledge/#subcommands","title":"Subcommands","text":""},{"location":"cli/knowledge/#add","title":"<code>add</code>","text":"<p>Add a file or directory to the knowledge base:</p> <pre><code>vandelay knowledge add ~/docs/report.pdf\nvandelay knowledge add ~/my-notes/\n</code></pre> <p>Supported formats: <code>.pdf</code>, <code>.txt</code>, <code>.md</code>, <code>.csv</code>, <code>.json</code>, <code>.docx</code>, <code>.doc</code></p>"},{"location":"cli/knowledge/#status","title":"<code>status</code>","text":"<p>Check the current knowledge corpus status:</p> <pre><code>vandelay knowledge status\n</code></pre> <p>Shows: enabled state, embedder provider, document count, vector store path.</p>"},{"location":"cli/knowledge/#list","title":"<code>list</code>","text":"<p>Show the current vector count and storage path:</p> <pre><code>vandelay knowledge list\n</code></pre>"},{"location":"cli/knowledge/#refresh","title":"<code>refresh</code>","text":"<p>Re-index the built-in corpus:</p> <pre><code>vandelay knowledge refresh\nvandelay knowledge refresh --force  # Force full rebuild\n</code></pre> <p>Without <code>--force</code>, only re-indexes if source versions have changed.</p>"},{"location":"cli/knowledge/#clear","title":"<code>clear</code>","text":"<p>Clear all knowledge vectors:</p> <pre><code>vandelay knowledge clear --yes\n</code></pre>"},{"location":"cli/knowledge/#how-it-works","title":"How It Works","text":"<ol> <li>Documents are read from disk (file or directory)</li> <li>Documents are chunked into passages</li> <li>Each chunk is embedded via the configured embedder</li> <li>Vectors are stored in ChromaDB at <code>~/.vandelay/data/knowledge_vectors/</code></li> </ol> <p>The agent queries this vector store when <code>knowledge.enabled</code> is <code>true</code> and <code>search_knowledge</code> is active on the agent.</p>"},{"location":"cli/knowledge/#embedder-resolution","title":"Embedder Resolution","text":"<p>See Knowledge concept for details on how the embedder is auto-resolved from your model provider.</p>"},{"location":"cli/memory/","title":"vandelay memory","text":"<p>View and manage agent memory.</p>"},{"location":"cli/memory/#usage","title":"Usage","text":"<pre><code>vandelay memory &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/memory/#subcommands","title":"Subcommands","text":""},{"location":"cli/memory/#list","title":"<code>list</code>","text":"<p>List stored memory records:</p> <pre><code>vandelay memory list\n</code></pre>"},{"location":"cli/memory/#clear","title":"<code>clear</code>","text":"<p>Clear all memory:</p> <pre><code>vandelay memory clear --yes\n</code></pre>"},{"location":"cli/memory/#memory-types","title":"Memory Types","text":"<p>Vandelay uses multiple memory layers:</p> <ul> <li>Session history: Conversation turns stored per session</li> <li>Agentic memory: Facts and preferences auto-extracted by Agno</li> <li>Workspace MEMORY.md: Agent-maintained persistent notes</li> </ul> <p>The <code>memory</code> CLI manages the agentic memory records in the SQLite database. Session history and workspace files are managed separately.</p> <p>See Memory concept for the full memory architecture.</p>"},{"location":"cli/onboard/","title":"vandelay onboard","text":"<p>CLI setup wizard for headless or non-interactive environments.</p> <p>Recommended for most users: Run <code>vandelay</code> to open the TUI dashboard instead. The onboarding wizard runs automatically inside the TUI on first launch \u2014 no need to run this command separately.</p>"},{"location":"cli/onboard/#usage","title":"Usage","text":"<pre><code>vandelay onboard\n</code></pre>"},{"location":"cli/onboard/#when-to-use-this","title":"When to Use This","text":"<ul> <li>Headless servers without a terminal UI (use <code>--non-interactive</code> with env vars)</li> <li>CI/CD pipelines where you want to script the initial setup</li> <li>Scripted deployments where you prefer CLI-only configuration</li> </ul> <p>For interactive use on a desktop or laptop, <code>vandelay</code> (no arguments) is the better entry point.</p>"},{"location":"cli/onboard/#what-it-does","title":"What It Does","text":"<ol> <li>Agent name: Set what to call your agent</li> <li>Provider: Pick from 10 LLM providers (Anthropic, OpenAI, Google, Ollama, etc.)</li> <li>Auth / API key: API key stored in <code>~/.vandelay/.env</code>; Ollama skips this step; OpenAI subscription uses OAuth</li> <li>Model: Select the specific model from a curated list for the chosen provider</li> <li>Timezone: Used for scheduling and cron jobs</li> <li>Config creation: Writes <code>~/.vandelay/config.json</code> with sensible defaults</li> <li>Workspace setup: Creates 7 workspace markdown files in <code>~/.vandelay/workspace/</code></li> </ol>"},{"location":"cli/onboard/#options","title":"Options","text":"Flag Description <code>--non-interactive</code> / <code>-n</code> Headless mode \u2014 reads config from environment variables"},{"location":"cli/onboard/#environment-variables-headless-mode","title":"Environment Variables (Headless Mode)","text":"Variable Effect <code>VANDELAY_AUTO_ONBOARD=1</code> Auto-run onboard on first <code>vandelay start</code> if no config exists"},{"location":"cli/onboard/#re-running","title":"Re-running","text":"<p>Safe to re-run. Existing config values are preserved as defaults. Workspace files are only created if they don't exist.</p>"},{"location":"cli/start/","title":"vandelay start","text":"<p>Start the FastAPI server (and optionally a terminal chat session).</p> <p>Typical workflow: Run <code>vandelay</code> to open the TUI dashboard, then run <code>vandelay start</code> in a separate terminal to bring the server online. The TUI's Chat tab connects automatically once the server is running.</p>"},{"location":"cli/start/#usage","title":"Usage","text":"<pre><code>vandelay start\n</code></pre>"},{"location":"cli/start/#what-it-does","title":"What It Does","text":"<ol> <li>Loads configuration from <code>~/.vandelay/config.json</code> and <code>~/.vandelay/.env</code></li> <li>Creates the agent (or team) with configured model, tools, and workspace</li> <li>Starts the FastAPI server (default: <code>0.0.0.0:8000</code>)</li> <li>Starts the scheduler engine (if cron jobs exist)</li> <li>Registers Telegram/WhatsApp webhooks (if enabled)</li> <li>Opens an interactive terminal chat session</li> </ol>"},{"location":"cli/start/#options","title":"Options","text":"Flag Description <code>--server</code>, <code>-s</code> Server only \u2014 no interactive terminal chat (for headless/daemon deployments) <code>--watch</code>, <code>-w</code> Auto-restart on file changes (watches src, config, and workspace files)"},{"location":"cli/start/#environment-variables","title":"Environment Variables","text":"Variable Effect <code>VANDELAY_HOST</code> Override server bind address <code>VANDELAY_PORT</code> Override server port <code>VANDELAY_AUTO_ONBOARD=1</code> Run headless onboarding automatically if no config exists (PaaS use)"},{"location":"cli/status/","title":"vandelay status","text":"<p>Show current configuration and agent status.</p>"},{"location":"cli/status/#usage","title":"Usage","text":"<pre><code>vandelay status\n</code></pre>"},{"location":"cli/status/#what-it-shows","title":"What It Shows","text":"<pre><code>  Agent:     Art\n  Model:     anthropic / claude-sonnet-4-6\n  Safety:    normal\n  Timezone:  America/New_York\n  DB:        /home/user/.vandelay/data/vandelay.db\n  Workspace: /home/user/.vandelay/workspace\n  Channels:  Telegram\n  Knowledge: enabled\n  Team:      enabled (cto, project-manager, vandelay-expert)\n  Server:    running at http://0.0.0.0:8000\n  Docs:      http://0.0.0.0:8000/docs\n  WS:        ws://0.0.0.0:8000/ws/terminal\n</code></pre> Field Description Agent Agent name from config Model Provider and model ID Safety Safety mode (<code>strict</code>, <code>normal</code>, or <code>off</code>) Timezone Timezone used for scheduling and heartbeat DB Path to the SQLite database Workspace Path to workspace markdown files Channels Active channels (Terminal only, Telegram, WhatsApp) Knowledge Whether RAG knowledge base is enabled Team Team mode status and member names Server Server URL if running, or \"not running\""},{"location":"cli/status/#notes","title":"Notes","text":"<ul> <li>Requires <code>vandelay onboard</code> to have been run first.</li> <li>The server status check connects to the configured port \u2014 if the daemon is installed and running, it shows as \"running\".</li> <li>Also available as a slash command inside terminal chat: <code>/status</code></li> </ul>"},{"location":"cli/tools/","title":"vandelay tools","text":"<p>Manage agent tools \u2014 list, add, remove, browse, and inspect.</p>"},{"location":"cli/tools/#usage","title":"Usage","text":"<pre><code>vandelay tools &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/tools/#subcommands","title":"Subcommands","text":""},{"location":"cli/tools/#list","title":"<code>list</code>","text":"<p>List all available tools:</p> <pre><code>vandelay tools list\nvandelay tools list --enabled          # Show only enabled tools\nvandelay tools list --category search  # Filter by category\nvandelay tools list --builtin          # Show only built-in tools\n</code></pre> <p>Output includes name, category, pricing, status, and dependencies.</p>"},{"location":"cli/tools/#add","title":"<code>add</code>","text":"<p>Enable a tool and install its dependencies:</p> <pre><code>vandelay tools add shell\nvandelay tools add duckduckgo\nvandelay tools add tavily gmail googlecalendar\nvandelay tools add camoufox --no-install  # Enable without installing deps\n</code></pre> <p>If team mode is enabled, you'll be prompted to assign the tool to team members.</p> <p>Restart the agent (or run <code>vandelay update</code>) for the tool to take effect.</p>"},{"location":"cli/tools/#remove","title":"<code>remove</code>","text":"<p>Disable a tool:</p> <pre><code>vandelay tools remove tavily\nvandelay tools remove camoufox --uninstall  # Also remove pip dependencies\n</code></pre>"},{"location":"cli/tools/#browse","title":"<code>browse</code>","text":"<p>Interactively browse, inspect, and enable/disable tools:</p> <pre><code>vandelay tools browse\n</code></pre> <p>Walks through filter \u2192 list \u2192 detail \u2192 action. The easiest way to explore what's available.</p>"},{"location":"cli/tools/#info","title":"<code>info</code>","text":"<p>Show details for a specific tool:</p> <pre><code>vandelay tools info shell\nvandelay tools info duckduckgo\n</code></pre> <p>Displays class, module, category, pricing, dependencies, installed status, and enabled status.</p>"},{"location":"cli/tools/#refresh","title":"<code>refresh</code>","text":"<p>Rebuild the tool registry from the installed Agno package:</p> <pre><code>vandelay tools refresh\n</code></pre> <p>Use this after upgrading Agno or adding new custom tools. The registry is cached at <code>~/.vandelay/tool_registry.json</code>.</p>"},{"location":"cli/tools/#auth-google","title":"<code>auth-google</code>","text":"<p>Authenticate all Google services (Gmail, Calendar, Drive, Sheets) with a single OAuth flow:</p> <pre><code>vandelay tools auth-google\nvandelay tools auth-google --reauth  # Re-authenticate even if token exists\n</code></pre> <p>Requires <code>GOOGLE_CLIENT_ID</code>, <code>GOOGLE_CLIENT_SECRET</code>, and <code>GOOGLE_PROJECT_ID</code> in <code>~/.vandelay/.env</code>. Token is saved to <code>~/.vandelay/google_token.json</code> and covers all four Google services. Use the headless console flow \u2014 no browser needed on the server.</p>"},{"location":"cli/tools/#create","title":"<code>create</code>","text":"<p>Scaffold a custom tool template:</p> <pre><code>vandelay tools create my_tool\n</code></pre> <p>Creates <code>~/.vandelay/custom_tools/my_tool.py</code> with a <code>MyToolTools</code> class ready to extend. After editing:</p> <pre><code>vandelay tools refresh   # Register the new tool\nvandelay tools add my_tool  # Enable it\n</code></pre> <p>See Custom Tools for a full walkthrough.</p>"},{"location":"cli/tools/#how-tools-are-resolved","title":"How Tools Are Resolved","text":"<ol> <li>Tool slugs in <code>enabled_tools</code> are looked up in the tool registry</li> <li>The registry maps slugs to Agno toolkit classes (or Vandelay custom toolkits)</li> <li>Toolkits are instantiated and attached to the agent (or the team leader and designated members)</li> </ol>"},{"location":"cli/tools/#tool-assignment-in-teams","title":"Tool Assignment in Teams","text":"<p>When team mode is enabled, tools are assigned per-member via their <code>tools</code> list. A member can only use tools that are both:</p> <ul> <li>In the top-level <code>enabled_tools</code></li> <li>In the member's <code>tools</code> list</li> </ul> <p>The team leader also receives all <code>enabled_tools</code> directly, so it can act without delegating when appropriate.</p> <p>See Your First Team for details.</p>"},{"location":"cli/update/","title":"vandelay update","text":"<p>Pull the latest code, sync dependencies, and restart the daemon.</p>"},{"location":"cli/update/#usage","title":"Usage","text":"<pre><code>vandelay update\nvandelay update --no-restart  # Skip daemon restart\n</code></pre>"},{"location":"cli/update/#what-it-does","title":"What It Does","text":"<ol> <li>Runs <code>git pull</code> from the Vandelay repository root</li> <li>Runs <code>uv sync</code> to install any new or updated dependencies</li> <li>Restarts the daemon if it is currently running</li> </ol> <p>If the daemon is not running, the restart step is skipped automatically.</p>"},{"location":"cli/update/#options","title":"Options","text":"Flag Description <code>--no-restart</code> Skip daemon restart after update"},{"location":"cli/update/#example-output","title":"Example Output","text":"<pre><code>Pulling latest code from /home/user/vandelay...\n  \u2713 Already up to date.\nSyncing dependencies...\n  \u2713 Dependencies up to date.\nRestarting daemon...\n  \u2713 Daemon restarted.\n\nUpdate complete.\n</code></pre>"},{"location":"cli/update/#notes","title":"Notes","text":"<ul> <li><code>vandelay update</code> must be run from inside the cloned git repository. If Vandelay was not installed from source, it prints a warning and skips the <code>git pull</code> step.</li> <li>After updating, workspace files in <code>~/.vandelay/workspace/</code> are not overwritten \u2014 your customizations are preserved. However, if a file is empty, the updated default template is used automatically.</li> <li>If <code>uv sync</code> fails (e.g. a dependency is unavailable), the update aborts before restarting the daemon to avoid running with partial dependencies.</li> </ul>"},{"location":"concepts/","title":"Concepts","text":"<p>This section explains how Vandelay works under the hood. Read these to understand the \"why\" behind the platform.</p>"},{"location":"concepts/#core-concepts","title":"Core Concepts","text":"Concept What It Covers Architecture System diagram, request flow, component overview Agents Agent lifecycle, workspace files, system prompt assembly Teams Supervisor model, specialist delegation, team modes Memory Session history, agentic memory, workspace files, DB storage Knowledge RAG pipeline, embedders, vector store, document ingestion Channels Channel-agnostic design, Terminal/Telegram/WhatsApp/WebSocket Safety Safety modes, blocked patterns, sandboxing"},{"location":"concepts/#how-they-fit-together","title":"How They Fit Together","text":"<pre><code>Channels \u2192 ChatService \u2192 Agent/Team \u2192 Tools\n                \u2195              \u2195\n            Sessions      Memory + Knowledge\n                \u2195\n            SQLite DB\n</code></pre> <p>Messages arrive from any channel, get processed by the agent (or team supervisor), which uses tools, memory, and knowledge to respond. Everything persists through the unified SQLite database.</p>"},{"location":"concepts/agents/","title":"Agents","text":"<p>Vandelay agents are built on Agno's Agent class with additional layers for workspace-driven prompts, hot-reloadable tools, and persistent memory.</p>"},{"location":"concepts/agents/#agent-lifecycle","title":"Agent Lifecycle","text":"<ol> <li>Config loaded: Settings read from <code>config.json</code>, <code>.env</code>, and environment variables</li> <li>Model created: LLM provider initialized from <code>model.provider</code> and <code>model_id</code></li> <li>Tools resolved: Enabled tools instantiated from the tool registry</li> <li>Workspace assembled: Seven markdown files compose the system prompt</li> <li>Agent created: Agno <code>Agent</code> (or <code>Team</code>) instantiated with all components</li> <li>Ready: Agent accepts messages via ChatService</li> </ol>"},{"location":"concepts/agents/#system-prompt-assembly","title":"System Prompt Assembly","text":"<p>The system prompt is built from workspace files in <code>~/.vandelay/workspace/</code>:</p> File Purpose <code>SOUL.md</code> Core personality, communication style, behavioral rules <code>USER.md</code> User preferences, context, personal details <code>AGENTS.md</code> Team delegation rules: which member handles what <code>TOOLS.md</code> Tool usage guidance, best practices per tool <code>HEARTBEAT.md</code> Proactive tasks to check during heartbeat <code>BOOTSTRAP.md</code> One-time startup instructions <code>MEMORY.md</code> Persistent notes the agent maintains <p>These files are yours to edit. Changes take effect on the next agent reload.</p>"},{"location":"concepts/agents/#hot-reload","title":"Hot Reload","text":"<p>When you enable or disable a tool (via CLI or chat), the agent is recreated with the new tool set without a server restart. The <code>AgentProvider</code> protocol ensures ChatService always gets the current agent instance.</p>"},{"location":"concepts/agents/#single-agent-vs-team","title":"Single Agent vs Team","text":"<ul> <li>Single agent (team disabled): One agent with all enabled tools</li> <li>Team mode (default): A supervisor delegates to specialist members with scoped tools</li> </ul> <p>See Teams for details on team mode.</p>"},{"location":"concepts/architecture/","title":"Architecture","text":"<p>Vandelay is built as a layered system where each component has a clear responsibility.</p>"},{"location":"concepts/architecture/#system-overview","title":"System Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Channels                       \u2502\n\u2502  Terminal  \u2502  Telegram  \u2502  WhatsApp  \u2502  WebSocket \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               FastAPI Server                      \u2502\n\u2502  Routes  \u2502  WebSocket Handler  \u2502  Webhook Handler \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 ChatService                       \u2502\n\u2502  Message routing  \u2502  Channel abstraction          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            Agent / Team Supervisor                \u2502\n\u2502  Agno Agent  \u2502  Tool dispatch  \u2502  Delegation      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Memory     \u2502   Knowledge    \u2502   Scheduler       \u2502\n\u2502  (SQLite)    \u2502  (ChromaDB)   \u2502   (APScheduler)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"concepts/architecture/#key-components","title":"Key Components","text":""},{"location":"concepts/architecture/#chatservice","title":"ChatService","text":"<p>The central router. All channels send messages through <code>ChatService.run()</code>, which resolves the current agent (or team), processes the message, and returns the response. Channel-agnostic by design.</p>"},{"location":"concepts/architecture/#agentprovider","title":"AgentProvider","text":"<p>A lazy provider protocol that always returns the current agent instance. When config changes trigger a reload (e.g., enabling a tool), the provider creates a new agent without restarting the server.</p>"},{"location":"concepts/architecture/#agent-factory","title":"Agent Factory","text":"<p><code>agents/factory.py</code> builds agents and teams from config. Handles:</p> <ul> <li>Model creation from provider settings</li> <li>Tool resolution and injection</li> <li>Team member creation with scoped tools</li> <li>Workspace-based system prompt assembly</li> </ul>"},{"location":"concepts/architecture/#scheduler-engine","title":"Scheduler Engine","text":"<p>APScheduler-backed cron engine. Jobs are persisted to <code>cron_jobs.json</code> and restored on startup. The engine sends cron commands through ChatService as if they were user messages.</p>"},{"location":"concepts/architecture/#workspace","title":"Workspace","text":"<p>Six markdown files that compose the agent's system prompt:</p> <ul> <li><code>SOUL.md</code>: Core personality and behavior</li> <li><code>USER.md</code>: User preferences and context</li> <li><code>AGENTS.md</code>: Team delegation rules</li> <li><code>TOOLS.md</code>: Tool usage guidance</li> <li><code>HEARTBEAT.md</code>: Proactive task checklist</li> <li><code>BOOTSTRAP.md</code>: One-time startup instructions</li> </ul> <p>Agent memory is stored in the database, not in a workspace file.</p>"},{"location":"concepts/architecture/#data-flow","title":"Data Flow","text":""},{"location":"concepts/architecture/#configuration-hierarchy","title":"Configuration Hierarchy","text":"<p>Settings resolve in priority order:</p> <ol> <li>Environment variables (<code>VANDELAY_</code> prefix)</li> <li><code>.env</code> file (<code>~/.vandelay/.env</code>)</li> <li><code>config.json</code> (<code>~/.vandelay/config.json</code>)</li> <li>Code defaults</li> </ol>"},{"location":"concepts/channels/","title":"Channels","text":"<p>Vandelay is channel-agnostic: the same agent handles messages from any source with shared memory and context.</p>"},{"location":"concepts/channels/#supported-channels","title":"Supported Channels","text":"Channel Interface Setup Terminal CLI chat session Built-in, always available Telegram Bot via BotFather Telegram Setup guide WhatsApp Cloud API webhook Config + Meta developer account WebSocket Real-time connection Built-in, available at <code>/ws</code>"},{"location":"concepts/channels/#how-it-works","title":"How It Works","text":"<p>All channels route through <code>ChatService.run()</code>:</p> <pre><code>Terminal Input  \u2500\u2510\nTelegram Webhook \u2500\u2524\u2192 ChatService.run() \u2192 Agent/Team \u2192 Response\nWhatsApp Webhook \u2500\u2524\nWebSocket Message \u2518\n</code></pre> <p>The <code>ChatService</code> normalizes incoming messages into a common format, passes them to the agent, and routes responses back through the originating channel.</p>"},{"location":"concepts/channels/#shared-memory","title":"Shared Memory","text":"<p>All channels use the same <code>user_id</code> from config. This means:</p> <ul> <li>Conversations in Telegram are visible from Terminal</li> <li>Memory persists across channel switches</li> <li>The agent maintains one continuous context</li> </ul>"},{"location":"concepts/channels/#channel-specific-features","title":"Channel-Specific Features","text":""},{"location":"concepts/channels/#terminal","title":"Terminal","text":"<ul> <li>Interactive REPL with Rich markdown rendering</li> <li>File paths auto-resolved</li> </ul>"},{"location":"concepts/channels/#telegram","title":"Telegram","text":"<ul> <li>Persistent typing indicator (re-sent every 4s during processing)</li> <li>File sending via <code>send_file()</code> tool</li> <li>Chat lock by <code>telegram_chat_id</code> for security</li> </ul>"},{"location":"concepts/channels/#whatsapp","title":"WhatsApp","text":"<ul> <li>Webhook verification with Meta app secret</li> <li>Message signature validation</li> </ul>"},{"location":"concepts/channels/#websocket","title":"WebSocket","text":"<ul> <li>Real-time streaming</li> <li>Used by the FastAPI server's built-in web interface</li> </ul>"},{"location":"concepts/knowledge/","title":"Knowledge","text":"<p>Vandelay includes a RAG (Retrieval-Augmented Generation) pipeline for giving your agent access to documents and reference material.</p>"},{"location":"concepts/knowledge/#how-it-works","title":"How It Works","text":"<pre><code>Documents \u2192 Chunking \u2192 Embedding \u2192 ChromaDB Vector Store\n                                        \u2193\n                              Agent queries knowledge\n                                        \u2193\n                              Relevant chunks returned\n                                        \u2193\n                              Agent uses context in response\n</code></pre>"},{"location":"concepts/knowledge/#enabling-knowledge","title":"Enabling Knowledge","text":"<pre><code>vandelay config  # \u2192 Knowledge \u2192 Enable\n</code></pre> <p>Or in <code>config.json</code>:</p> <pre><code>{\n  \"knowledge\": {\n    \"enabled\": true\n  }\n}\n</code></pre>"},{"location":"concepts/knowledge/#embedder-resolution","title":"Embedder Resolution","text":"<p>The embedder is auto-resolved from your model provider:</p> Model Provider Embedder Used Model OpenAI OpenAI Embedder <code>text-embedding-3-small</code> Google Gemini Embedder default Ollama Ollama Embedder default Anthropic fastembed (local) <code>BAAI/bge-small-en-v1.5</code> OpenRouter OpenAI (if key set) or fastembed varies <p>Anthropic has no embedding API, so Vandelay falls back to fastembed, a local embedder that requires no API key.</p> <p>Override the embedder explicitly in config:</p> <pre><code>{\n  \"knowledge\": {\n    \"embedder\": {\n      \"provider\": \"openai\",\n      \"model\": \"text-embedding-3-small\"\n    }\n  }\n}\n</code></pre>"},{"location":"concepts/knowledge/#vector-store","title":"Vector Store","text":"<p>Documents are stored in ChromaDB at <code>~/.vandelay/data/knowledge_vectors/</code>. ChromaDB is embedded (no server needed) and supports fast similarity search.</p>"},{"location":"concepts/knowledge/#cli-commands","title":"CLI Commands","text":"<pre><code>vandelay knowledge add ~/docs/report.pdf   # Add a file\nvandelay knowledge add ~/my-notes/         # Add a directory\nvandelay knowledge status                  # Check status\nvandelay knowledge list                    # Show vector count\nvandelay knowledge refresh                 # Refresh built-in corpus\nvandelay knowledge refresh --force         # Force full rebuild\nvandelay knowledge clear --yes             # Clear all knowledge\n</code></pre> <p>See CLI Reference: knowledge for full details.</p>"},{"location":"concepts/memory/","title":"Memory","text":"<p>Vandelay's memory system gives your agent persistent context across conversations, sessions, and restarts.</p>"},{"location":"concepts/memory/#memory-layers","title":"Memory Layers","text":""},{"location":"concepts/memory/#1-session-history","title":"1. Session History","text":"<p>Agno stores conversation history per session in the SQLite database. Configured with:</p> <ul> <li><code>num_history_runs=2</code>: Include the last 2 conversation turns for context</li> <li><code>max_tool_calls_from_history=5</code>: Limit tool call results in history to manage tokens</li> <li><code>enable_session_summaries=True</code>: Summarize older sessions for long-term context</li> </ul>"},{"location":"concepts/memory/#2-agentic-memory","title":"2. Agentic Memory","text":"<p>Agno's built-in memory system (<code>update_memory_on_run=True</code>) automatically extracts and stores important facts, preferences, and context from conversations. These are recalled in future sessions.</p>"},{"location":"concepts/memory/#3-workspace-files","title":"3. Workspace Files","text":"<p>The agent's workspace (<code>~/.vandelay/workspace/</code>) contains markdown files that shape its behavior and context. These are loaded into the system prompt at startup.</p> <p>See Workspace Files for the full reference.</p>"},{"location":"concepts/memory/#storage","title":"Storage","text":"<p>All memory is stored in a unified SQLite database at <code>~/.vandelay/data/vandelay.db</code>. This handles:</p> <ul> <li>Session history</li> <li>Agentic memory records</li> <li>Session summaries</li> </ul> <p>For PostgreSQL, set <code>db_url</code> in config or the <code>DATABASE_URL</code> environment variable.</p>"},{"location":"concepts/memory/#shared-memory-across-channels","title":"Shared Memory Across Channels","text":"<p>All channels (Terminal, Telegram, WhatsApp, WebSocket) use the same <code>user_id</code>, so memory is shared. A conversation in Telegram is remembered when you switch to Terminal.</p>"},{"location":"concepts/memory/#token-management","title":"Token Management","text":"<p>History can grow large. Vandelay manages this with:</p> <ul> <li>Limited history runs (2 by default)</li> <li>Capped tool call results from history (5 by default)</li> <li>Session summaries that compress old conversations</li> </ul>"},{"location":"concepts/safety/","title":"Safety","text":"<p>Vandelay includes a safety system for shell command execution. Since the agent has system access, guardrails prevent accidental damage.</p>"},{"location":"concepts/safety/#safety-modes","title":"Safety Modes","text":"Mode Behavior <code>trust</code> All commands auto-approved. Use only on isolated servers. <code>confirm</code> Every shell command requires user approval before execution. <code>tiered</code> Safe commands auto-approved, risky commands require confirmation. (Default) <p>Configure in <code>config.json</code>:</p> <pre><code>{\n  \"safety\": {\n    \"mode\": \"tiered\"\n  }\n}\n</code></pre>"},{"location":"concepts/safety/#tiered-mode","title":"Tiered Mode","text":"<p>In <code>tiered</code> mode, commands are classified:</p>"},{"location":"concepts/safety/#auto-approved-safe","title":"Auto-Approved (safe)","text":"<p>Commands in the <code>allowed_commands</code> list run without confirmation:</p> <pre><code>ls, cat, head, tail, grep, find, echo, pwd, whoami, date, ...\n</code></pre>"},{"location":"concepts/safety/#requires-confirmation-risky","title":"Requires Confirmation (risky)","text":"<p>Any command not in the allowed list prompts for approval.</p>"},{"location":"concepts/safety/#blocked-dangerous","title":"Blocked (dangerous)","text":"<p>Commands matching <code>blocked_patterns</code> are rejected outright:</p> <pre><code>rm -rf /, mkfs, dd if=, :(){ :|:&amp; };:, ...\n</code></pre>"},{"location":"concepts/safety/#command-timeout","title":"Command Timeout","text":"<p>All shell commands have a configurable timeout (default: 120 seconds):</p> <pre><code>{\n  \"safety\": {\n    \"command_timeout_seconds\": 120\n  }\n}\n</code></pre>"},{"location":"concepts/safety/#file-write-protection","title":"File Write Protection","text":"<p>The <code>FileTools</code> toolkit includes a write allowlist. By default, writes to <code>src/vandelay/</code> (the source code) are blocked to prevent the agent from modifying its own code.</p>"},{"location":"concepts/safety/#best-practices","title":"Best Practices","text":"<ul> <li>Use <code>tiered</code> mode for most deployments</li> <li>Use <code>trust</code> mode only on dedicated, isolated servers</li> <li>Lock Telegram to a single <code>chat_id</code> to prevent unauthorized access</li> <li>Store secrets in <code>~/.vandelay/.env</code>, never in <code>config.json</code></li> <li>Use a strong <code>VANDELAY_SECRET_KEY</code> for JWT signing</li> </ul>"},{"location":"concepts/teams/","title":"Teams","text":"<p>Vandelay uses Agno's Team system to coordinate multiple specialist agents under a supervisor.</p>"},{"location":"concepts/teams/#how-teams-work","title":"How Teams Work","text":"<pre><code>User Message\n    \u2193\nTeam Supervisor (leader)\n    \u2193 delegates to\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Vandelay Expert\u2502  Your Custom Specialists  \u2502\n\u2502  (file, python, \u2502  (any tools, any role)    \u2502\n\u2502   shell)        \u2502                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>The supervisor receives all messages, decides which specialist should handle the task, and delegates accordingly. Each member has scoped tools: they can only use what's assigned to them.</p> <p>The team leader also has direct access to all user-enabled tools (same as solo mode), so it can act without delegating when appropriate \u2014 for example, running shell commands during heartbeat checks.</p>"},{"location":"concepts/teams/#enabling-team-mode","title":"Enabling Team Mode","text":"<p>Team mode is on by default in coordinate mode. You can toggle it and change the mode in the TUI Agents tab \u2192 Team section, or via the CLI:</p> <pre><code>vandelay config  # \u2192 Team \u2192 Enable/Disable\n</code></pre> <p>Or in <code>config.json</code>:</p> <pre><code>{\n  \"team\": {\n    \"enabled\": true,\n    \"members\": [\"vandelay-expert\"]\n  }\n}\n</code></pre>"},{"location":"concepts/teams/#team-modes","title":"Team Modes","text":"Mode Behavior <code>coordinate</code> Supervisor coordinates members, synthesizes responses (default) <code>route</code> Supervisor routes to one member, that member responds directly <code>broadcast</code> All members process the message, supervisor synthesizes <code>tasks</code> Supervisor breaks work into tasks, assigns to members"},{"location":"concepts/teams/#the-vandelay-expert","title":"The Vandelay Expert","text":"<p>Vandelay ships with one default specialist: the Vandelay Expert.</p> Name Tools Role <code>vandelay-expert</code> file, python, shell Designs, creates, tests, and improves team members <p>The Vandelay Expert is your agent builder and platform authority. It can evolve your setup over time without you touching config files manually. It can:</p> <ul> <li>Write and edit member instructions: draft prompts, refine personas, fix vague or conflicting guidance</li> <li>Assign tools to members: enable tools and scope them to the right specialists</li> <li>Apply starter templates: pick from 14 prebuilt personas (CTO, Researcher, DevOps, etc.) and customize them</li> <li>Set up cron jobs: schedule recurring tasks with cron expressions and timezones</li> <li>Configure the heartbeat: set what the agent checks and acts on autonomously while idle</li> <li>Manage the team: add, remove, and reconfigure specialists as your needs change</li> <li>Diagnose underperforming agents: identify prompt issues, wrong tool assignments, token overflow, and missing context</li> <li>Design custom tools: scaffold new toolkits when built-in tools don't cover a use case</li> </ul> <p>It ships enabled by default. To remove it, edit <code>config.json</code>:</p> <pre><code>{\n  \"team\": {\n    \"members\": []\n  }\n}\n</code></pre> <p>All other members are defined fully in <code>config.json</code> \u2014 no magic names.</p>"},{"location":"concepts/teams/#custom-members","title":"Custom Members","text":"<p>Every other team member is defined by you. Add members in <code>config.json</code> with any combination of tools, role description, and instruction file:</p> <pre><code>{\n  \"team\": {\n    \"members\": [\n      \"kramer\",\n      {\n        \"name\": \"Kramer\",\n        \"role\": \"wild brainstorming, unfiltered first drafts, and lateral thinking\",\n        \"tools\": [\"wikipedia\", \"camoufox\"],\n        \"instructions_file\": \"kramer.md\"\n      }\n    ]\n  }\n}\n</code></pre> <p>See Agent Templates for starter templates and Your First Team for a step-by-step guide.</p>"},{"location":"configuration/","title":"Configuration Reference","text":"<p>Vandelay stores its configuration in <code>~/.vandelay/config.json</code>. Settings are loaded with the following priority (highest wins):</p> <ol> <li>Environment variables (<code>VANDELAY_</code> prefix)</li> <li><code>.env</code> file (<code>~/.vandelay/.env</code>)</li> <li>config.json (<code>~/.vandelay/config.json</code>)</li> <li>Defaults (defined in code)</li> </ol> <p>Generate a default config interactively:</p> <pre><code>vandelay onboard\n</code></pre>"},{"location":"configuration/#top-level-settings","title":"Top-Level Settings","text":"Key Type Default Description <code>agent_name</code> string <code>\"Art\"</code> Display name for the agent <code>user_id</code> string <code>\"\"</code> Email or identifier, shared across all channels <code>timezone</code> string <code>\"UTC\"</code> Timezone for scheduling and heartbeat active hours <code>db_url</code> string <code>\"\"</code> Database URL. Empty = SQLite at <code>~/.vandelay/data/vandelay.db</code>. Set to a <code>postgresql://</code> URL for Postgres <code>workspace_dir</code> string <code>\"~/.vandelay/workspace\"</code> Directory containing workspace markdown files (SOUL.md, USER.md, etc.) <code>enabled_tools</code> list[string] <code>[]</code> Tool slugs to load (e.g. <code>[\"shell\", \"file\", \"python\", \"tavily\"]</code>)"},{"location":"configuration/#model","title":"<code>model</code>","text":"<p>LLM provider and model selection.</p> Key Type Default Description <code>provider</code> string <code>\"anthropic\"</code> Model provider: <code>anthropic</code>, <code>openai</code>, <code>google</code>, <code>ollama</code>, <code>openrouter</code> <code>model_id</code> string <code>\"claude-sonnet-4-5-20250929\"</code> Model identifier passed to the provider <code>auth_method</code> string <code>\"api_key\"</code> Authentication method: <code>api_key</code> or <code>token</code> (OpenAI only)"},{"location":"configuration/#safety","title":"<code>safety</code>","text":"<p>Shell command safety guardrails.</p> Key Type Default Description <code>mode</code> string <code>\"confirm\"</code> Safety mode: <code>trust</code> (auto-approve), <code>confirm</code> (ask first), <code>tiered</code> (allow safe, confirm risky) <code>allowed_commands</code> list[string] <code>[\"ls\", \"cat\", \"head\", ...]</code> Commands auto-approved in <code>tiered</code> mode <code>blocked_patterns</code> list[string] <code>[\"rm -rf /\", \"mkfs\", ...]</code> Patterns blocked in all modes <code>command_timeout_seconds</code> int <code>120</code> Max execution time for shell commands"},{"location":"configuration/#channels","title":"<code>channels</code>","text":"<p>Messaging channel configuration.</p> Key Type Default Description <code>telegram_enabled</code> bool <code>false</code> Enable the Telegram bot channel <code>telegram_bot_token</code> string <code>\"\"</code> Telegram bot token (stored in <code>.env</code> as <code>TELEGRAM_TOKEN</code>) <code>telegram_chat_id</code> string <code>\"\"</code> Lock Telegram to a single chat ID <code>whatsapp_enabled</code> bool <code>false</code> Enable the WhatsApp channel <code>whatsapp_access_token</code> string <code>\"\"</code> WhatsApp Cloud API token (stored in <code>.env</code>) <code>whatsapp_phone_number_id</code> string <code>\"\"</code> WhatsApp phone number ID <code>whatsapp_verify_token</code> string <code>\"\"</code> Webhook verification token <code>whatsapp_app_secret</code> string <code>\"\"</code> Meta app secret for signature verification"},{"location":"configuration/#heartbeat","title":"<code>heartbeat</code>","text":"<p>Proactive wake / heartbeat settings.</p> Key Type Default Description <code>enabled</code> bool <code>false</code> Enable periodic heartbeat <code>interval_minutes</code> int <code>30</code> Minutes between heartbeat checks <code>active_hours_start</code> int <code>8</code> Start of active window (24h format) <code>active_hours_end</code> int <code>22</code> End of active window (24h format) <code>timezone</code> string <code>\"UTC\"</code> Timezone for active hours"},{"location":"configuration/#server","title":"<code>server</code>","text":"<p>HTTP server (FastAPI) settings.</p> Key Type Default Description <code>host</code> string <code>\"0.0.0.0\"</code> Bind address <code>port</code> int <code>8000</code> Listen port <code>secret_key</code> string <code>\"change-me-to-a-random-string\"</code> JWT signing key (stored in <code>.env</code> as <code>VANDELAY_SECRET_KEY</code>)"},{"location":"configuration/#knowledge","title":"<code>knowledge</code>","text":"<p>Knowledge / RAG settings.</p> Key Type Default Description <code>enabled</code> bool <code>false</code> Enable knowledge/RAG pipeline <code>embedder.provider</code> string <code>\"\"</code> Embedder provider: <code>openai</code>, <code>google</code>, <code>ollama</code>, or <code>\"\"</code> (auto-match model provider) <code>embedder.model</code> string <code>\"\"</code> Embedding model ID (e.g. <code>\"text-embedding-3-small\"</code>) <code>embedder.api_key</code> string <code>\"\"</code> Embedder API key if different from model provider (stored in <code>.env</code>) <code>embedder.base_url</code> string <code>\"\"</code> Custom embedder endpoint <p>Anthropic has no embedding API. When using Anthropic as the model provider, the embedder auto-falls back to fastembed (local, no API key needed).</p>"},{"location":"configuration/#google","title":"<code>google</code>","text":"<p>Google services settings.</p> Key Type Default Description <code>calendar_id</code> string <code>\"primary\"</code> Google Calendar ID to use"},{"location":"configuration/#team","title":"<code>team</code>","text":"<p>Agent team (supervisor mode) settings.</p> Key Type Default Description <code>enabled</code> bool <code>true</code> Enable team mode. When <code>false</code>, the main agent handles everything solo <code>mode</code> string <code>\"coordinate\"</code> Team mode: <code>coordinate</code>, <code>route</code>, <code>broadcast</code>, <code>tasks</code> <code>members</code> list <code>[\"vandelay-expert\"]</code> Team members: <code>\"vandelay-expert\"</code> or full <code>MemberConfig</code> objects"},{"location":"configuration/#named-preset","title":"Named preset","text":"<p>One string shortcut is supported:</p> Name Tools Role <code>vandelay-expert</code> file, python, shell Agent builder: designs, creates, tests, and improves team members"},{"location":"configuration/#memberconfig-schema","title":"MemberConfig schema","text":"<p>For full control, use objects instead of strings:</p> <pre><code>{\n  \"name\": \"my-specialist\",\n  \"role\": \"Description of what this member does\",\n  \"tools\": [\"shell\", \"file\", \"python\"],\n  \"model_provider\": \"\",\n  \"model_id\": \"\",\n  \"instructions\": [\"Extra inline instructions\"],\n  \"instructions_file\": \"my-specialist.md\"\n}\n</code></pre> Field Type Default Description <code>name</code> string (required) Unique member identifier <code>role</code> string <code>\"\"</code> Role description shown to the supervisor <code>tools</code> list[string] <code>[]</code> Tool slugs this member can use (must be in <code>enabled_tools</code>) <code>model_provider</code> string <code>\"\"</code> Override model provider (empty = inherit main) <code>model_id</code> string <code>\"\"</code> Override model ID (empty = inherit main) <code>instructions</code> list[string] <code>[]</code> Inline instruction strings <code>instructions_file</code> string <code>\"\"</code> Path to <code>.md</code> file with instructions (relative to <code>~/.vandelay/members/</code>)"},{"location":"configuration/#template-bootstrap","title":"Template bootstrap","text":"<p>Members whose names match a starter template (e.g. <code>vandelay-expert</code>, <code>cto</code>, <code>devops</code>) automatically have their template <code>.md</code> copied to <code>~/.vandelay/members/</code> on first use. This gives the member rich persona instructions out of the box. The file is yours to edit afterward.</p>"},{"location":"configuration/#deep_work","title":"<code>deep_work</code>","text":"<p>Autonomous background execution settings.</p> Key Type Default Description <code>enabled</code> bool <code>false</code> Enable deep work mode <code>background</code> bool <code>true</code> Run in background (<code>false</code> = blocking) <code>activation</code> string <code>\"suggest\"</code> Activation mode: <code>suggest</code>, <code>explicit</code>, <code>auto</code> <code>max_iterations</code> int <code>50</code> Max iterations per deep work session <code>max_time_minutes</code> int <code>240</code> Max time (minutes) per session <code>progress_interval_minutes</code> int <code>5</code> Minutes between progress updates <code>progress_channel</code> string <code>\"\"</code> Channel for progress updates (empty = originating channel) <code>save_results_to_workspace</code> bool <code>true</code> Save results to workspace files"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>Secret values should be stored in <code>~/.vandelay/.env</code>, not in <code>config.json</code>. Vandelay automatically migrates any secrets found in config.json to <code>.env</code> on startup.</p> Variable Description Used By <code>ANTHROPIC_API_KEY</code> Anthropic API key model (anthropic) <code>OPENAI_API_KEY</code> OpenAI API key model (openai), embedder fallback <code>OPENROUTER_API_KEY</code> OpenRouter API key model (openrouter) <code>GOOGLE_API_KEY</code> Google AI API key model (google) <code>GOOGLE_CLIENT_ID</code> Google OAuth client ID Google tools (Gmail, Calendar, etc.) <code>GOOGLE_CLIENT_SECRET</code> Google OAuth client secret Google tools <code>GOOGLE_PROJECT_ID</code> Google Cloud project ID Google tools <code>TELEGRAM_TOKEN</code> Telegram bot token channels.telegram <code>TELEGRAM_CHAT_ID</code> Lock Telegram to one chat channels.telegram <code>WHATSAPP_ACCESS_TOKEN</code> WhatsApp Cloud API token channels.whatsapp <code>WHATSAPP_PHONE_NUMBER_ID</code> WhatsApp phone number ID channels.whatsapp <code>WHATSAPP_VERIFY_TOKEN</code> Webhook verification token channels.whatsapp <code>WHATSAPP_APP_SECRET</code> Meta app secret (signature verification) channels.whatsapp <code>VANDELAY_HOST</code> Server bind address server.host <code>VANDELAY_PORT</code> Server port server.port <code>VANDELAY_SECRET_KEY</code> JWT signing key server.secret_key <code>VANDELAY_EMBEDDER_API_KEY</code> Embedder API key (if different from model) knowledge.embedder <code>VANDELAY_AUTO_RESTART</code> Enable file-watcher auto-restart (<code>1</code>/<code>0</code>) CLI <code>VANDELAY_AUTO_ONBOARD</code> Auto-onboard on first <code>start</code> (<code>1</code>/<code>0</code>) CLI <code>DATABASE_URL</code> PostgreSQL connection string (overrides <code>db_url</code>) database <p>All <code>VANDELAY_*</code> variables override the corresponding settings from <code>config.json</code>.</p>"},{"location":"configuration/#example-configs","title":"Example Configs","text":""},{"location":"configuration/#minimal","title":"Minimal","text":"<pre><code>{\n  \"agent_name\": \"Art\",\n  \"user_id\": \"you@example.com\",\n  \"timezone\": \"America/New_York\",\n  \"enabled_tools\": [\"shell\", \"file\", \"python\", \"tavily\", \"camoufox\"],\n  \"model\": {\n    \"provider\": \"anthropic\",\n    \"model_id\": \"claude-sonnet-4-5-20250929\"\n  },\n  \"team\": {\n    \"enabled\": true,\n    \"members\": [\"vandelay-expert\"]\n  }\n}\n</code></pre>"},{"location":"configuration/#full","title":"Full","text":"<pre><code>{\n  \"agent_name\": \"Art\",\n  \"user_id\": \"you@example.com\",\n  \"timezone\": \"Europe/London\",\n  \"enabled_tools\": [\"shell\", \"file\", \"python\", \"tavily\", \"gmail\", \"googlecalendar\", \"camoufox\"],\n  \"model\": {\n    \"provider\": \"anthropic\",\n    \"model_id\": \"claude-sonnet-4-5-20250929\"\n  },\n  \"safety\": {\n    \"mode\": \"tiered\"\n  },\n  \"channels\": {\n    \"telegram_enabled\": true,\n    \"telegram_chat_id\": \"123456789\"\n  },\n  \"heartbeat\": {\n    \"enabled\": true,\n    \"interval_minutes\": 60,\n    \"active_hours_start\": 9,\n    \"active_hours_end\": 21,\n    \"timezone\": \"Europe/London\"\n  },\n  \"team\": {\n    \"enabled\": true,\n    \"members\": [\n      \"vandelay-expert\",\n      \"browser\",\n      \"system\",\n      {\n        \"name\": \"my-researcher\",\n        \"role\": \"Deep research specialist\",\n        \"tools\": [\"tavily\", \"crawl4ai\"],\n        \"instructions_file\": \"my-researcher.md\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"deployment/","title":"Deployment","text":"<p>Vandelay is built for self-hosted deployment. Your agent runs on your server, with your data, under your control.</p>"},{"location":"deployment/#deployment-options","title":"Deployment Options","text":"Path Best For Guide VPS Production: Ubuntu/Debian server with systemd Recommended Local Development: run <code>vandelay start</code> on your machine Quickstart"},{"location":"deployment/#what-you-need","title":"What You Need","text":"<ul> <li>A Linux server (Ubuntu 22.04+ recommended)</li> <li>Python 3.11+</li> <li>An API key for your LLM provider</li> <li>A domain name (optional, for Telegram webhooks)</li> </ul>"},{"location":"deployment/#architecture-in-production","title":"Architecture in Production","text":"<pre><code>Internet\n    \u2193\nNginx (reverse proxy, TLS)\n    \u2193 :8000\nVandelay (FastAPI + uvicorn)\n    \u2193\nsystemd (daemon management)\n</code></pre> <p>The daemon runs Vandelay as a background service with automatic restart on failure. Nginx handles TLS termination and proxies requests to the FastAPI server.</p>"},{"location":"deployment/#quick-deploy","title":"Quick Deploy","text":"<pre><code># On your server\ngit clone https://github.com/shaunymca/vandelay.git\ncd vandelay\nuv sync\nuv tool install -e .\nvandelay onboard\nvandelay daemon install\nvandelay daemon start\n</code></pre> <p>See the VPS guide for the full walkthrough with Nginx, firewall, and security hardening.</p>"},{"location":"deployment/security/","title":"Security","text":"<p>Best practices for securing your Vandelay deployment.</p>"},{"location":"deployment/security/#api-key-management","title":"API Key Management","text":"<p>Never put API keys in <code>config.json</code>. Use <code>~/.vandelay/.env</code>:</p> <pre><code>ANTHROPIC_API_KEY=sk-ant-...\nTELEGRAM_TOKEN=123456:ABC...\nVANDELAY_SECRET_KEY=your-random-secret\n</code></pre> <p>Vandelay automatically migrates secrets found in <code>config.json</code> to <code>.env</code> on startup.</p>"},{"location":"deployment/security/#file-permissions","title":"File Permissions","text":"<pre><code>chmod 600 ~/.vandelay/.env\nchmod 700 ~/.vandelay/\n</code></pre>"},{"location":"deployment/security/#jwt-secret","title":"JWT Secret","text":"<p>The server uses a JWT secret for WebSocket authentication. Change the default:</p> <pre><code># Generate a strong secret\npython3 -c \"import secrets; print(secrets.token_urlsafe(32))\"\n</code></pre> <p>Add to <code>~/.vandelay/.env</code>:</p> <pre><code>VANDELAY_SECRET_KEY=your-generated-secret\n</code></pre>"},{"location":"deployment/security/#telegram-chat-lock","title":"Telegram Chat Lock","text":"<p>Lock your Telegram bot to a single chat ID to prevent unauthorized access:</p> <pre><code>{\n  \"channels\": {\n    \"telegram_enabled\": true,\n    \"telegram_chat_id\": \"123456789\"\n  }\n}\n</code></pre> <p>Without this, anyone who finds your bot can chat with it.</p>"},{"location":"deployment/security/#safety-modes","title":"Safety Modes","text":"<p>For production servers:</p> <ul> <li><code>tiered</code> (recommended): Auto-approves safe commands, blocks dangerous ones, confirms everything else</li> <li><code>trust</code>: Only use on isolated, dedicated servers where the agent needs full autonomy</li> </ul> <pre><code>{\n  \"safety\": {\n    \"mode\": \"tiered\"\n  }\n}\n</code></pre>"},{"location":"deployment/security/#network-security","title":"Network Security","text":"<ul> <li>Bind to localhost if using a reverse proxy: set <code>\"host\": \"127.0.0.1\"</code> in server config</li> <li>Use TLS via Nginx + Let's Encrypt (see VPS guide)</li> <li>Firewall: Only expose ports 22, 80, 443</li> </ul>"},{"location":"deployment/security/#file-write-protection","title":"File Write Protection","text":"<p>The <code>FileTools</code> toolkit blocks writes to <code>src/vandelay/</code> by default, preventing the agent from modifying its own source code. Custom blocked paths can be configured.</p>"},{"location":"deployment/security/#checklist","title":"Checklist","text":"<ul> <li>[ ] API keys in <code>.env</code>, not <code>config.json</code></li> <li>[ ] Strong <code>VANDELAY_SECRET_KEY</code></li> <li>[ ] Telegram <code>chat_id</code> set</li> <li>[ ] Safety mode set to <code>tiered</code> or higher</li> <li>[ ] <code>.env</code> file permissions: <code>600</code></li> <li>[ ] Nginx with TLS in front of the server</li> <li>[ ] Firewall enabled (UFW or equivalent)</li> <li>[ ] Server binds to <code>127.0.0.1</code> (behind proxy)</li> </ul>"},{"location":"deployment/troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and how to debug them.</p>"},{"location":"deployment/troubleshooting/#agent-not-responding","title":"Agent Not Responding","text":"<p>Check the daemon is running:</p> <pre><code>vandelay daemon status\nsystemctl --user status vandelay\n</code></pre> <p>Check logs for errors:</p> <pre><code>vandelay daemon logs --follow\njournalctl --user -u vandelay -f\n</code></pre> <p>Verify config is valid:</p> <pre><code>vandelay config  # Opens the config editor (will show parse errors)\n</code></pre>"},{"location":"deployment/troubleshooting/#telegram-bot-not-working","title":"Telegram Bot Not Working","text":"<ol> <li>Is Telegram enabled? Check <code>channels.telegram_enabled</code> is <code>true</code></li> <li>Is the token correct? Verify <code>TELEGRAM_TOKEN</code> in <code>~/.vandelay/.env</code></li> <li>Is the server publicly accessible? Telegram needs to reach your webhook URL</li> <li>Chat ID mismatch? If <code>telegram_chat_id</code> is set, it must match your chat</li> </ol>"},{"location":"deployment/troubleshooting/#cron-jobs-not-firing","title":"Cron Jobs Not Firing","text":"<ol> <li>Is the daemon running? Cron jobs only execute when the server is active</li> <li>Check the job list: <code>vandelay cron list</code></li> <li>Timezone correct? Cron times are evaluated in the configured timezone</li> <li>Check logs: Look for scheduler-related entries in <code>vandelay daemon logs</code></li> </ol>"},{"location":"deployment/troubleshooting/#high-token-usage","title":"High Token Usage","text":"<ul> <li>Reduce history: Lower <code>num_history_runs</code> (default: 2) or <code>max_tool_calls_from_history</code> (default: 5)</li> <li>Enable session summaries: Set <code>enable_session_summaries: true</code> to compress old sessions</li> <li>Trim workspace files: Large <code>SOUL.md</code> or <code>MEMORY.md</code> files increase every request's token count</li> </ul>"},{"location":"deployment/troubleshooting/#knowledgerag-issues","title":"Knowledge/RAG Issues","text":"<ul> <li>\"No embedder available\": Install fastembed (<code>uv add fastembed</code>) or set an explicit embedder provider</li> <li>Empty results: Run <code>vandelay knowledge refresh --force</code> to rebuild the corpus</li> <li>Slow refresh: Local fastembed depends on CPU speed. Consider using OpenAI embedder for faster processing.</li> </ul>"},{"location":"deployment/troubleshooting/#intel-mac-x86_64-knowledge-not-available","title":"Intel Mac (x86_64) \u2014 Knowledge Not Available","text":"<p>Neither <code>chromadb</code> nor <code>lancedb</code> ships pre-built wheels for macOS x86_64. This is an upstream limitation \u2014 <code>onnxruntime</code> (a dependency of both) dropped Intel Mac support in v1.19+.</p> <p>Vandelay detects this automatically and disables knowledge during onboarding. You will see:</p> <pre><code>\u26a0 Knowledge is not available on Intel Mac (x86_64).\n</code></pre> <p>Your options:</p> Option Notes Run without knowledge Default \u2014 agent works fully, just no RAG Build lancedb from source Requires Rust toolchain \u2014 <code>uv add lancedb</code> will compile Run a remote ChromaDB server Point Vandelay at an external ChromaDB instance on a supported platform Use an Apple Silicon or Linux machine Full knowledge support out of the box <p>To check your platform status at any time:</p> <pre><code>vandelay knowledge status\n</code></pre>"},{"location":"deployment/troubleshooting/#memory-issues","title":"Memory Issues","text":"<ul> <li>Agent not remembering: Check <code>update_memory_on_run</code> is enabled (default: true)</li> <li>Wrong channel memory: Verify all channels use the same <code>user_id</code> in config</li> <li>Memory too large: Use <code>vandelay memory clear --yes</code> to reset agentic memory</li> </ul>"},{"location":"deployment/troubleshooting/#server-wont-start","title":"Server Won't Start","text":"<ul> <li>Port in use: Another process is using port 8000. Change with <code>VANDELAY_PORT=8001</code></li> <li>Missing API key: Check <code>~/.vandelay/.env</code> has your provider's API key</li> <li>Import errors: Run <code>uv sync</code> to install all dependencies</li> </ul>"},{"location":"deployment/troubleshooting/#getting-help","title":"Getting Help","text":"<ul> <li>Check the GitHub Issues</li> <li>Review the Configuration Reference for settings</li> <li>Enable debug logging for more verbose output</li> </ul>"},{"location":"deployment/vps/","title":"VPS Deployment","text":"<p>Full walkthrough for deploying Vandelay on an Ubuntu/Debian VPS.</p>"},{"location":"deployment/vps/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ubuntu 22.04+ or Debian 12+</li> <li>Root or sudo access</li> <li>A domain name (optional, for webhooks)</li> </ul>"},{"location":"deployment/vps/#step-1-server-setup","title":"Step 1: Server Setup","text":"<pre><code># Create a dedicated user\nsudo adduser vandelay\nsudo usermod -aG sudo vandelay\nsu - vandelay\n</code></pre>"},{"location":"deployment/vps/#step-2-install-dependencies","title":"Step 2: Install Dependencies","text":"<pre><code># Python 3.11+\nsudo apt update\nsudo apt install python3.11 python3.11-venv git\n\n# uv (package manager)\ncurl -LsSf https://astral.sh/uv/install.sh | sh\nsource ~/.bashrc\n</code></pre>"},{"location":"deployment/vps/#step-3-install-vandelay","title":"Step 3: Install Vandelay","text":"<pre><code>git clone https://github.com/shaunymca/vandelay.git\ncd vandelay\nuv sync\nuv tool install -e .\n</code></pre>"},{"location":"deployment/vps/#step-4-configure","title":"Step 4: Configure","text":"<pre><code>vandelay onboard\n</code></pre> <p>Follow the interactive wizard to set up your model, API key, and initial config.</p>"},{"location":"deployment/vps/#step-5-install-the-daemon","title":"Step 5: Install the Daemon","text":"<pre><code>vandelay daemon install\nvandelay daemon start\nvandelay daemon status\n</code></pre> <p>This creates a systemd user unit that:</p> <ul> <li>Starts Vandelay on boot</li> <li>Restarts on failure</li> <li>Runs as the <code>vandelay</code> user</li> </ul>"},{"location":"deployment/vps/#step-6-reverse-proxy-nginx","title":"Step 6: Reverse Proxy (Nginx)","text":"<pre><code>sudo apt install nginx\n</code></pre> <p>Create <code>/etc/nginx/sites-available/vandelay</code>:</p> <pre><code>server {\n    listen 80;\n    server_name your-domain.com;\n\n    location / {\n        proxy_pass http://127.0.0.1:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /ws {\n        proxy_pass http://127.0.0.1:8000/ws;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre> <pre><code>sudo ln -s /etc/nginx/sites-available/vandelay /etc/nginx/sites-enabled/\nsudo nginx -t\nsudo systemctl reload nginx\n</code></pre>"},{"location":"deployment/vps/#step-7-tls-lets-encrypt","title":"Step 7: TLS (Let's Encrypt)","text":"<pre><code>sudo apt install certbot python3-certbot-nginx\nsudo certbot --nginx -d your-domain.com\n</code></pre>"},{"location":"deployment/vps/#step-8-firewall","title":"Step 8: Firewall","text":"<pre><code>sudo ufw allow 22/tcp    # SSH\nsudo ufw allow 80/tcp    # HTTP\nsudo ufw allow 443/tcp   # HTTPS\nsudo ufw enable\n</code></pre>"},{"location":"deployment/vps/#updating","title":"Updating","text":"<pre><code>cd ~/vandelay\ngit pull\nvandelay daemon restart\n</code></pre>"},{"location":"deployment/vps/#monitoring","title":"Monitoring","text":"<pre><code>vandelay daemon status\nvandelay daemon logs --follow\njournalctl --user -u vandelay -f\n</code></pre>"},{"location":"deployment/vps/#next-steps","title":"Next Steps","text":"<ul> <li>Security - API key management, JWT, Telegram lock</li> <li>Troubleshooting - Common issues and debugging</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to Vandelay. This section gets you from zero to a running agent in under 5 minutes.</p>"},{"location":"getting-started/#what-is-vandelay","title":"What is Vandelay?","text":"<p>Vandelay is an always-on AI agent platform built on Agno. It wraps Agno's agent framework with:</p> <ul> <li>A TUI dashboard \u2014 the primary interface for chat, config, agents, scheduler, and live status</li> <li>A CLI for headless configuration and management</li> <li>A FastAPI server for multi-channel access</li> <li>A daemon for 24/7 operation with heartbeat and cron scheduling</li> <li>Team mode for multi-agent coordination</li> <li>Built-in tools for shell, file, browser, and more</li> </ul>"},{"location":"getting-started/#how-it-works","title":"How It Works","text":"<pre><code>You (Terminal / Telegram / WhatsApp / WebSocket)\n    \u2193\nFastAPI Server\n    \u2193\nChatService \u2192 Agent (or Team Supervisor)\n    \u2193                    \u2193\nMemory / Knowledge    Specialist Members\n    \u2193                    \u2193\nSQLite DB            Scoped Tools\n</code></pre> <p>The agent receives messages from any channel, processes them through Agno's agent framework, and responds, with full access to tools, memory, and knowledge.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ol> <li>Installation: Install Vandelay and its dependencies</li> <li>Quickstart: Send your first message in under 5 minutes</li> </ol>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11+</li> <li>uv: Fast Python package manager</li> <li>An API key for at least one LLM provider (Anthropic, OpenAI, Google, Ollama, or OpenRouter)</li> </ul>"},{"location":"getting-started/installation/#install-vandelay","title":"Install Vandelay","text":"<p>Vandelay is currently distributed from source. Install via git:</p> <pre><code>git clone https://github.com/shaunymca/vandelay.git\ncd vandelay\nuv sync\nuv tool install -e .\n</code></pre> <p>Verify it works:</p> <pre><code>vandelay --version\n</code></pre> <p>PyPI release coming soon. Once published, installation will simplify to <code>uv tool install vandelay</code>.</p>"},{"location":"getting-started/installation/#platform-notes","title":"Platform Notes","text":"Platform Status Notes Linux Full support Recommended for production. systemd daemon included. macOS Full support launchd daemon included. Windows Full support PID-file daemon included. WSL recommended for production."},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once installed, open the Vandelay TUI dashboard:</p> <pre><code>vandelay\n</code></pre> <p>If this is your first time, the onboarding wizard will appear automatically to set up your provider and API key. See the Quickstart for the full walkthrough.</p>"},{"location":"getting-started/quickstart/","title":"Quickstart","text":"<p>Get a running agent in under 5 minutes.</p>"},{"location":"getting-started/quickstart/#1-open-the-dashboard","title":"1. Open the Dashboard","text":"<pre><code>vandelay\n</code></pre> <p>This opens the Vandelay TUI dashboard. On first launch, the onboarding wizard appears automatically and walks you through 5 steps:</p> <ol> <li>Agent name: What to call your agent</li> <li>LLM provider: Pick from 10 providers (Anthropic, OpenAI, Google, Ollama, etc.)</li> <li>API key / Auth: Stored securely in <code>~/.vandelay/.env</code> (skipped for Ollama; OpenAI subscription uses OAuth)</li> <li>Model: Select the specific model to use (curated list per provider)</li> <li>Timezone: For scheduling and cron jobs</li> </ol> <p>Your config is saved to <code>~/.vandelay/config.json</code> and workspace files are created at <code>~/.vandelay/workspace/</code>.</p> <p>Already configured? The TUI opens directly on the Chat tab \u2014 no wizard needed.</p>"},{"location":"getting-started/quickstart/#2-start-the-server","title":"2. Start the Server","text":"<p>After onboarding finishes, you'll land on the Chat tab. If the server isn't running yet, the TUI header shows a Start button \u2014 click it to launch the agent server. The Chat tab connects automatically once it's up.</p> <p>For 24/7 operation, install the daemon so it starts automatically on login/reboot:</p> <pre><code>vandelay daemon install\nvandelay daemon start\n</code></pre> <p>You can also start the server manually from a terminal with <code>vandelay start --server</code>, but the Start button in the TUI is the easier path.</p>"},{"location":"getting-started/quickstart/#3-chat","title":"3. Chat","text":"<p>Back in the TUI, the Chat tab is your primary interface. Try:</p> <pre><code>What can you do?\nWhat tools do you have?\nCreate a cron job that runs every morning at 8am to check the weather\n</code></pre>"},{"location":"getting-started/quickstart/#what-just-happened","title":"What Just Happened?","text":"<ul> <li>The agent loaded your config, model, and workspace files</li> <li>Memory and session history are being persisted to <code>~/.vandelay/data/vandelay.db</code></li> <li>Vandelay provides additional features that Agno OS can easily view:<ul> <li>Tracing: Every agent run, tool call, and model invocation is traced automatically</li> <li>Knowledge: RAG pipeline for document search (enable via <code>vandelay config</code>)</li> <li>Chat: Chat directly with your main agent and explore what it can do</li> <li>Metrics: Keep an eye on your token usage</li> <li>Evaluations: Measure the quality of your agent</li> </ul> </li> </ul>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Enable tools - Add shell, file, browser, and more</li> <li>Set up Telegram - Chat with your agent from your phone</li> <li>Configure your team - Add specialist members</li> <li>Deploy to a server - Run 24/7 on a VPS</li> </ul>"},{"location":"guides/","title":"Guides","text":"<p>Task-oriented walkthroughs for common Vandelay workflows.</p>"},{"location":"guides/#setup-configuration","title":"Setup &amp; Configuration","text":"Guide Description Your First Team Set up a team with 2-3 specialist members Telegram Setup Connect your agent to Telegram Google Services Set up Gmail, Calendar, Drive, Sheets"},{"location":"guides/#customization","title":"Customization","text":"Guide Description Custom Tools Build a custom toolkit with <code>@tool</code> or <code>Toolkit</code> subclass Agent Templates Browse starter templates and author your own Workspace Files Customize all 7 workspace files"},{"location":"guides/#operations","title":"Operations","text":"Guide Description Scheduling Set up cron jobs, heartbeat, and active hours"},{"location":"guides/agent-templates/","title":"Agent Templates","text":"<p>Vandelay ships with 14 starter templates for common agent roles. Use them as-is or as a starting point for custom members.</p> <p>TUI: Go to Agents tab \u2192 Members \u2192 + Add Agent \u2192 enable \"Start from template?\" to browse and apply templates visually.</p>"},{"location":"guides/agent-templates/#available-templates","title":"Available Templates","text":"Template Role Default Tools CTO Technical leadership, architecture decisions shell, file, python AI Engineer Prompt engineering, model selection file, python Sales Executive Pipeline management, outreach gmail, googlesheets Marketer Content strategy, campaigns crawl4ai, googlesheets Personal Assistant Calendar, email, reminders gmail, googlecalendar Chef Meal planning, recipes - Personal Trainer Workouts, fitness tracking googlesheets Research Analyst Deep research, reports tavily, crawl4ai Vandelay Expert Agent builder: creates and improves team members file, python, shell Writer Content creation, editing file Data Analyst Data analysis, visualization python, googlesheets DevOps Infrastructure, CI/CD, monitoring shell, file Content Creator Social media, blog posts file, crawl4ai Project Manager Roadmap, task tracking, sprints file, googlesheets"},{"location":"guides/agent-templates/#using-a-template","title":"Using a Template","text":""},{"location":"guides/agent-templates/#via-tui","title":"Via TUI","text":"<p>Open the TUI (<code>vandelay</code>), go to the Agents tab, click + Add Agent under Members. Toggle \"Start from template?\" and pick a template from the list. The template file is copied to <code>~/.vandelay/members/&lt;slug&gt;.md</code> and the member is added to your team config.</p>"},{"location":"guides/agent-templates/#via-cli","title":"Via CLI","text":"<pre><code>vandelay config  # \u2192 Team \u2192 Add member \u2192 \"Start from template?\"\n</code></pre> <p>Select a template from the picker. The template <code>.md</code> file is copied to <code>~/.vandelay/members/&lt;slug&gt;.md</code> and the member is added to your team config.</p>"},{"location":"guides/agent-templates/#whats-in-a-template","title":"What's in a Template","text":"<p>Each template includes:</p> <ul> <li>Role: What the agent does</li> <li>Expertise: Domain knowledge areas</li> <li>How You Work: Behavioral patterns and workflows</li> <li>Boundaries: What the agent should and shouldn't do</li> <li>Memory First: What to check before acting</li> <li>Tools You Prefer: Recommended tools for the role</li> </ul>"},{"location":"guides/agent-templates/#customizing-templates","title":"Customizing Templates","text":"<p>After adding a template, edit the member file directly:</p> <pre><code>nano ~/.vandelay/members/cto.md\n</code></pre> <p>Changes take effect on the next agent reload.</p>"},{"location":"guides/agent-templates/#authoring-your-own","title":"Authoring Your Own","text":"<p>Create a new <code>.md</code> file in <code>~/.vandelay/members/</code>:</p> <pre><code># My Custom Agent\n\n## Role\nWhat this agent does.\n\n## Expertise\n- Domain 1\n- Domain 2\n\n## How You Work\nBehavioral instructions...\n\n## Boundaries\nWhat NOT to do...\n</code></pre> <p>Then add it to your team config:</p> <pre><code>{\n  \"name\": \"my-agent\",\n  \"role\": \"Description for the supervisor\",\n  \"tools\": [\"shell\", \"file\"],\n  \"instructions_file\": \"my-agent.md\"\n}\n</code></pre>"},{"location":"guides/custom-tool/","title":"Writing Custom Tools","text":"<p>Vandelay tools are Agno <code>Toolkit</code> subclasses. Agents discover tools by reading their function signatures and docstrings, so the quality of your docstrings directly affects how well agents use your tool.</p>"},{"location":"guides/custom-tool/#two-approaches","title":"Two Approaches","text":""},{"location":"guides/custom-tool/#tool-decorator-for-standalone-functions","title":"<code>@tool</code> Decorator \u2014 for standalone functions","text":"<p>Best for simple, single-purpose utilities with no shared state.</p> <pre><code>from agno.tools import tool\n\n@tool\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Get the current weather for a city.\n\n    Args:\n        city: The city name (e.g. 'New York', 'London').\n\n    Returns:\n        A plain-text weather summary.\n    \"\"\"\n    # Your implementation here\n    return f\"Weather in {city}: Sunny, 72\u00b0F\"\n</code></pre>"},{"location":"guides/custom-tool/#toolkit-subclass-for-grouped-tools-with-shared-state","title":"<code>Toolkit</code> Subclass \u2014 for grouped tools with shared state","text":"<p>Best when several functions share a connection, a browser session, a database handle, or any resource that should be initialised once and reused.</p> <pre><code>from agno.tools import Toolkit\n\nclass WeatherTools(Toolkit):\n    def __init__(self, api_key: str):\n        super().__init__(name=\"weather\")\n        self.api_key = api_key\n        self.register(self.get_weather)\n        self.register(self.get_forecast)\n\n    def get_weather(self, city: str) -&gt; str:\n        \"\"\"Get the current weather for a city.\n\n        Args:\n            city: The city name.\n\n        Returns:\n            A plain-text weather summary.\n        \"\"\"\n        return f\"Weather in {city}: Sunny, 72\u00b0F\"\n\n    def get_forecast(self, city: str, days: int = 5) -&gt; str:\n        \"\"\"Get a weather forecast for a city.\n\n        Args:\n            city: The city name.\n            days: Number of forecast days (default 5).\n\n        Returns:\n            A plain-text multi-day forecast.\n        \"\"\"\n        return f\"{days}-day forecast for {city}: ...\"\n</code></pre>"},{"location":"guides/custom-tool/#critical-rule-always-use-sync-functions","title":"Critical Rule: Always Use Sync Functions","text":"<p>Every method you register must be a regular <code>def</code>, not <code>async def</code>.</p> <p>Agno registers sync methods in <code>Toolkit.functions</code> and async methods in <code>Toolkit.async_functions</code>. When an agent formats its tool list to send to the model, it calls <code>Toolkit.get_functions()</code> (sync registry only) in the default path. If you use <code>async def</code>, your tools are invisible to the agent.</p> <pre><code># \u274c Wrong \u2014 functions go into async_functions, invisible to agents\nclass MyTools(Toolkit):\n    async def search(self, query: str) -&gt; str: ...\n\n# \u2705 Correct \u2014 functions go into functions, always visible\nclass MyTools(Toolkit):\n    def search(self, query: str) -&gt; str: ...\n</code></pre> <p>If you need to call async code (e.g. an async HTTP client), use <code>asyncio.run()</code> inside the sync function:</p> <pre><code>import asyncio\n\ndef search(self, query: str) -&gt; str:\n    \"\"\"Search the web for a query.\"\"\"\n    return asyncio.run(self._async_search(query))\n\nasync def _async_search(self, query: str) -&gt; str:\n    async with httpx.AsyncClient() as client:\n        ...\n</code></pre> <p>Why this matters</p> <p>Agno's <code>get_async_functions()</code> method merges both registries (sync + async), so async functions are reachable in pure-async paths. But the model tool formatting path always uses <code>get_functions()</code>. Keeping everything sync guarantees visibility everywhere.</p>"},{"location":"guides/custom-tool/#parameter-types-and-docstrings","title":"Parameter Types and Docstrings","text":"<p>Agno extracts parameter schemas from Python type annotations at runtime via <code>process_entrypoint()</code>. The agent model receives this schema and uses it to know which arguments to pass.</p> <p>Type annotations are required \u2014 without them, the parameter appears in the schema with no type and the model may not know how to call it correctly.</p> <p>Docstrings drive agent behaviour. The <code>Args:</code> block is parsed and each parameter description becomes the parameter's <code>description</code> in the JSON schema. Write descriptions as if explaining the parameter to a non-technical colleague.</p> <pre><code>def book_flight(\n    self,\n    origin: str,\n    destination: str,\n    date: str,\n    passengers: int = 1,\n) -&gt; str:\n    \"\"\"Search for and book a flight.\n\n    Args:\n        origin: IATA airport code for the departure airport (e.g. 'JFK').\n        destination: IATA airport code for the arrival airport (e.g. 'LHR').\n        date: Departure date in YYYY-MM-DD format.\n        passengers: Number of adult passengers (default 1).\n\n    Returns:\n        Booking confirmation number and flight details.\n    \"\"\"\n</code></pre>"},{"location":"guides/custom-tool/#supported-parameter-types","title":"Supported Parameter Types","text":"Python type JSON Schema type <code>str</code> <code>string</code> <code>int</code> <code>integer</code> <code>float</code> <code>number</code> <code>bool</code> <code>boolean</code> <code>list[str]</code> <code>array</code> of <code>string</code> <code>dict</code> <code>object</code> <code>Optional[str]</code> / <code>str \\| None</code> <code>string</code> (not required)"},{"location":"guides/custom-tool/#return-values","title":"Return Values","text":"<p>Always return a string. The agent receives the return value as raw text and reads it as part of its reasoning. If you return structured data (a dict, a list), convert it to a readable string first.</p> <pre><code># \u274c Wrong \u2014 the agent can't read a dict\ndef get_user(self, user_id: str) -&gt; dict:\n    return {\"name\": \"Alice\", \"email\": \"alice@example.com\"}\n\n# \u2705 Correct \u2014 readable text\ndef get_user(self, user_id: str) -&gt; str:\n    \"\"\"Get user details by ID.\"\"\"\n    return \"Name: Alice\\nEmail: alice@example.com\"\n</code></pre>"},{"location":"guides/custom-tool/#error-handling","title":"Error Handling","text":"<p>Return error messages as strings instead of raising exceptions. If your function raises, the agent sees the traceback as text \u2014 which is confusing. Return a human-readable error message so the agent can decide what to do.</p> <pre><code>def read_file(self, path: str) -&gt; str:\n    \"\"\"Read a file and return its contents.\"\"\"\n    try:\n        return Path(path).read_text()\n    except FileNotFoundError:\n        return f\"File not found: {path}\"\n    except PermissionError:\n        return f\"Permission denied: {path}\"\n</code></pre>"},{"location":"guides/custom-tool/#lazy-initialisation","title":"Lazy Initialisation","text":"<p>If your tool opens a browser, database connection, or network session, start it on first use rather than in <code>__init__</code>. This keeps startup fast and lets the agent decide whether to use the tool at all.</p> <pre><code>class DatabaseTools(Toolkit):\n    def __init__(self, db_url: str):\n        super().__init__(name=\"database\")\n        self.db_url = db_url\n        self._conn = None  # not connected yet\n        self.register(self.query)\n\n    def _ensure_connected(self) -&gt; None:\n        if self._conn is None:\n            import sqlite3\n            self._conn = sqlite3.connect(self.db_url)\n\n    def query(self, sql: str) -&gt; str:\n        \"\"\"Run a SQL query and return results as a table.\n\n        Args:\n            sql: The SQL query to execute.\n        \"\"\"\n        self._ensure_connected()\n        cursor = self._conn.execute(sql)\n        rows = cursor.fetchall()\n        if not rows:\n            return \"No results.\"\n        headers = [d[0] for d in cursor.description]\n        lines = [\" | \".join(headers)]\n        lines += [\" | \".join(str(v) for v in row) for row in rows]\n        return \"\\n\".join(lines)\n</code></pre>"},{"location":"guides/custom-tool/#testing-your-tool","title":"Testing Your Tool","text":"<p>Before wiring a tool into Vandelay, test it in isolation:</p> <pre><code># test_my_tool.py\ndef test_get_weather_returns_string():\n    tool = WeatherTools(api_key=\"test\")\n    result = tool.get_weather(\"London\")\n    assert isinstance(result, str)\n    assert \"London\" in result\n\ndef test_functions_are_registered_as_sync():\n    \"\"\"Ensure no async functions slip in \u2014 they'd be invisible to agents.\"\"\"\n    tool = WeatherTools(api_key=\"test\")\n    assert \"get_weather\" in tool.functions\n    assert \"get_forecast\" in tool.functions\n    assert tool.async_functions == {}\n\ndef test_parameter_schema_is_extracted():\n    \"\"\"Verify Agno can extract the parameter schema.\"\"\"\n    tool = WeatherTools(api_key=\"test\")\n    func = tool.functions[\"get_weather\"].model_copy(deep=True)\n    func.process_entrypoint(strict=False)\n    schema = func.to_dict()\n    props = schema[\"parameters\"][\"properties\"]\n    assert \"city\" in props\n    assert props[\"city\"][\"type\"] == \"string\"\n</code></pre> <p>Run with <code>uv run pytest tests/test_my_tool.py -v</code>.</p>"},{"location":"guides/custom-tool/#registering-with-vandelay","title":"Registering with Vandelay","text":"<p>Vandelay discovers tools via its tool registry. The simplest path for a custom tool is to add it to the manager directly.</p> <p>Custom tool loading from <code>~/.vandelay/custom_tools/</code></p> <p>Full custom tool loading from a user-space directory is in progress. For now, the recommended approach is to add your toolkit to <code>src/vandelay/tools/</code> and register it in the tool manager.</p>"},{"location":"guides/custom-tool/#next-steps","title":"Next Steps","text":"<ul> <li>Building a Toolkit \u2014 full end-to-end walkthrough using CamoufoxTools</li> <li>Built-in Tools \u2014 examples from Vandelay itself</li> <li>Tool Catalog \u2014 117 tools from Agno's ecosystem</li> </ul>"},{"location":"guides/first-team/","title":"Your First Team","text":"<p>This guide walks you through setting up a team with specialist members.</p>"},{"location":"guides/first-team/#prerequisites","title":"Prerequisites","text":"<ul> <li>Vandelay installed and onboarded</li> <li>At least one tool enabled (e.g., <code>shell</code>, <code>file</code>)</li> </ul>"},{"location":"guides/first-team/#step-1-enable-team-mode","title":"Step 1: Enable Team Mode","text":"<p>Team mode is on by default. Verify:</p> <pre><code>vandelay config  # \u2192 Team \u2192 check \"enabled: true\"\n</code></pre>"},{"location":"guides/first-team/#step-2-add-members","title":"Step 2: Add Members","text":"<p>The easiest way is through the CLI:</p> <pre><code>vandelay config  # \u2192 Team \u2192 Add member \u2192 Start from template\n</code></pre> <p>This opens a template picker with 14 starter templates. Pick one (e.g., CTO, DevOps, Personal Assistant) and it's added to your team.</p>"},{"location":"guides/first-team/#manual-config","title":"Manual Config","text":"<p>Or edit <code>config.json</code> directly:</p> <pre><code>{\n  \"team\": {\n    \"enabled\": true,\n    \"members\": [\n      \"vandelay-expert\",\n      {\n        \"name\": \"my-researcher\",\n        \"role\": \"Deep research specialist\",\n        \"tools\": [\"tavily\", \"crawl4ai\"],\n        \"instructions_file\": \"my-researcher.md\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/first-team/#step-3-assign-tools","title":"Step 3: Assign Tools","text":"<p>Members can only use tools that are:</p> <ol> <li>Listed in the top-level <code>enabled_tools</code></li> <li>Assigned to the member via their <code>tools</code> list</li> </ol> <p>Enable tools first:</p> <pre><code>vandelay tools enable shell file python tavily\n</code></pre>"},{"location":"guides/first-team/#step-4-test-delegation","title":"Step 4: Test Delegation","text":"<p>Start the agent and ask a question that requires a specific specialist:</p> <pre><code>You: Browse https://example.com and summarize the content\n\u2192 Supervisor delegates to browser specialist\n\nYou: List the files in my home directory\n\u2192 Supervisor delegates to system specialist\n</code></pre>"},{"location":"guides/first-team/#how-delegation-works","title":"How Delegation Works","text":"<p>The supervisor reads <code>AGENTS.md</code> from the workspace to decide which member handles each request. Edit <code>~/.vandelay/workspace/AGENTS.md</code> to customize delegation rules.</p>"},{"location":"guides/first-team/#next-steps","title":"Next Steps","text":"<ul> <li>Agent Templates - Browse all 14 starter templates</li> <li>Custom Tools - Build tools for your specialists</li> <li>Teams concept - Understand team modes and architecture</li> </ul>"},{"location":"guides/google-services/","title":"Google Services","text":"<p>Set up Gmail, Google Calendar, Google Drive, and Google Sheets access for your agent.</p>"},{"location":"guides/google-services/#prerequisites","title":"Prerequisites","text":"<ul> <li>A Google Cloud project</li> <li>OAuth 2.0 credentials (Client ID + Client Secret)</li> </ul>"},{"location":"guides/google-services/#step-1-create-google-cloud-credentials","title":"Step 1: Create Google Cloud Credentials","text":"<ol> <li>Go to Google Cloud Console</li> <li>Create a new project (or select an existing one)</li> <li>Enable the APIs you need:<ul> <li>Gmail API</li> <li>Google Calendar API</li> <li>Google Drive API</li> <li>Google Sheets API</li> </ul> </li> <li>Go to OAuth consent screen:<ul> <li>User type: External, status: Testing</li> <li>Add your your agent's or your email as a test user</li> <li>Add these scopes:<ul> <li><code>https://www.googleapis.com/auth/gmail.modify</code></li> <li><code>https://www.googleapis.com/auth/calendar</code></li> <li><code>https://www.googleapis.com/auth/drive</code></li> <li><code>https://www.googleapis.com/auth/spreadsheets</code></li> </ul> </li> </ul> </li> <li>Go to Credentials \u2192 Create Credentials \u2192 OAuth 2.0 Client ID</li> <li>Application type: Desktop app</li> <li>Download the credentials (Client ID + Client Secret)</li> </ol> <p>Note</p> <p>You don't configure scopes in Vandelay. They're hardcoded and automatically requested during <code>vandelay auth-google</code>. You only need to add them to the consent screen in Google Cloud so the OAuth flow is permitted to request them.</p>"},{"location":"guides/google-services/#step-2-configure-vandelay","title":"Step 2: Configure Vandelay","text":"<p>Add your credentials to <code>~/.vandelay/.env</code>:</p> <pre><code>GOOGLE_CLIENT_ID=your-client-id\nGOOGLE_CLIENT_SECRET=your-client-secret\nGOOGLE_PROJECT_ID=your-project-id\n</code></pre>"},{"location":"guides/google-services/#step-3-authenticate","title":"Step 3: Authenticate","text":"<pre><code>vandelay auth-google\n</code></pre> <p>This opens a browser (or prints a URL for headless servers) for OAuth consent. The token is saved to <code>~/.vandelay/google_token.json</code>.</p>"},{"location":"guides/google-services/#headless-servers","title":"Headless Servers","text":"<p>On servers without a browser, <code>auth-google</code> prints a URL. Open it on any device, complete the consent flow, and paste the authorization code back into the terminal.</p>"},{"location":"guides/google-services/#step-4-enable-google-tools","title":"Step 4: Enable Google Tools","text":"<pre><code>vandelay tools enable gmail googlecalendar googledrive googlesheets\n</code></pre>"},{"location":"guides/google-services/#available-google-tools","title":"Available Google Tools","text":"Tool Capabilities <code>gmail</code> Read, send, search emails. HTML body support. <code>googlecalendar</code> List, create, update, delete events <code>googledrive</code> List, search, read, upload files <code>googlesheets</code> Read, write, create spreadsheets"},{"location":"guides/google-services/#configuration","title":"Configuration","text":"<p>Set your calendar ID in <code>config.json</code> (defaults to <code>\"primary\"</code>):</p> <pre><code>{\n  \"google\": {\n    \"calendar_id\": \"primary\"\n  }\n}\n</code></pre>"},{"location":"guides/google-services/#token-refresh","title":"Token Refresh","text":"<p>The OAuth token auto-refreshes. If it expires or is revoked, re-run <code>vandelay auth-google</code>.</p>"},{"location":"guides/scheduling/","title":"Scheduling","text":"<p>Set up cron jobs, heartbeat, and active hours for autonomous agent behavior.</p>"},{"location":"guides/scheduling/#cron-jobs","title":"Cron Jobs","text":"<p>Cron jobs let the agent perform tasks on a schedule: checking email, updating spreadsheets, running reports, and more.</p>"},{"location":"guides/scheduling/#creating-via-the-tui-scheduler-tab","title":"Creating via the TUI Scheduler Tab","text":"<p>Open the TUI dashboard (<code>vandelay</code>) and go to the Scheduler tab \u2192 Cron sub-tab.</p> <ul> <li>Add: Click <code>+ Add</code> to open the job editor. Fill in the name, cron expression (5-field standard format), command, and timezone.</li> <li>Edit: Select a job row and click <code>\u270e Edit</code>.</li> <li>Enable / Disable: Select a job row and click <code>\u25c9 Enable</code> or <code>\u25ce Disable</code> to toggle it without deleting.</li> <li>Delete: Select a job row and click <code>\u2715 Delete</code>.</li> </ul> <p>The heartbeat job (if enabled) appears in the list but cannot be edited or deleted from this view \u2014 configure it in the Heartbeat sub-tab instead.</p>"},{"location":"guides/scheduling/#creating-via-chat","title":"Creating via Chat","text":"<p>Ask your agent:</p> <pre><code>You: Create a cron job that checks my email every morning at 8am\nYou: Schedule a daily fitness check-in at 7pm ET\nYou: Set up a weekly report every Monday at 9am\n</code></pre> <p>The agent uses <code>schedule_job()</code> to create the cron entry.</p>"},{"location":"guides/scheduling/#creating-via-cli","title":"Creating via CLI","text":"<pre><code>vandelay cron add --name \"morning-email\" --schedule \"0 8 * * *\" --command \"Check my email and summarize anything important\"\nvandelay cron list\nvandelay cron remove morning-email\n</code></pre>"},{"location":"guides/scheduling/#cron-expression-format","title":"Cron Expression Format","text":"<p>Standard 5-field cron syntax: <code>minute hour day month weekday</code></p> Expression Meaning <code>0 8 * * *</code> Every day at 8:00 AM <code>0 9 * * 1</code> Every Monday at 9:00 AM <code>*/30 * * * *</code> Every 30 minutes <code>0 19 * * 1-5</code> Weekdays at 7:00 PM"},{"location":"guides/scheduling/#timezones","title":"Timezones","text":"<p>Cron jobs and the heartbeat default to your configured timezone (set during onboarding or via <code>/config</code> \u2192 Timezone). You don't need to specify it every time:</p> <pre><code>You: Schedule a daily report at 9am\n</code></pre> <p>To override for a specific job, include the timezone in your request:</p> <pre><code>You: Schedule a weekly backup at midnight London time\n</code></pre> <p>Or via CLI (omit <code>--tz</code> to use your configured timezone):</p> <pre><code>vandelay cron add \"daily-report\" \"0 9 * * *\" \"Generate daily report\"\n# Uses settings.timezone automatically\n\nvandelay cron add \"london-backup\" \"0 0 * * 0\" \"Weekly backup\" --tz \"Europe/London\"\n# Explicit override\n</code></pre> <p>To change your default timezone: <code>vandelay config</code> \u2192 Timezone.</p>"},{"location":"guides/scheduling/#how-cron-jobs-execute","title":"How Cron Jobs Execute","text":"<p>When a cron job fires, the scheduler sends the command through <code>ChatService</code> as if it were a user message. The agent (or team) processes it normally, with full access to tools and memory, using your user ID so it shares your conversation history and memory.</p> <p>Jobs are persisted in <code>~/.vandelay/cron_jobs.json</code> and restored on startup.</p>"},{"location":"guides/scheduling/#heartbeat","title":"Heartbeat","text":"<p>The heartbeat is a periodic check-in where the agent evaluates proactive tasks defined in <code>HEARTBEAT.md</code>.</p>"},{"location":"guides/scheduling/#configuring-via-the-tui","title":"Configuring via the TUI","text":"<p>Open the TUI dashboard (<code>vandelay</code>) and go to Scheduler \u2192 Heartbeat sub-tab:</p> Field Description Enable heartbeat Toggle on/off Interval (minutes) How often the heartbeat fires within active hours Active from / to 24-hour window during which the heartbeat is allowed to run Timezone Timezone for the active hours window <p>Click Save to persist changes immediately to <code>~/.vandelay/config.json</code>.</p> <p>The current heartbeat status (on/off, interval, active window) is also visible at a glance on the Status tab.</p>"},{"location":"guides/scheduling/#configuring-via-configjson","title":"Configuring via config.json","text":"<pre><code>{\n  \"heartbeat\": {\n    \"enabled\": true,\n    \"interval_minutes\": 30,\n    \"active_hours_start\": 8,\n    \"active_hours_end\": 22,\n    \"timezone\": \"America/New_York\"\n  }\n}\n</code></pre>"},{"location":"guides/scheduling/#active-hours","title":"Active Hours","text":"<p>The heartbeat only fires within the active hours window. Outside this window, the agent stays quiet.</p>"},{"location":"guides/scheduling/#what-happens-on-heartbeat","title":"What Happens on Heartbeat","text":"<p><code>HEARTBEAT.md</code> is loaded into the agent's system prompt at startup, so the agent knows its checklist without any extra file reads. When the heartbeat fires, the agent runs through its checklist and responds with <code>HEARTBEAT_OK</code> if everything is fine, or alerts you via your primary channel if something needs attention.</p> <p>The default checklist:</p> <ol> <li>Call <code>check_open_tasks()</code> \u2014 resume in-progress work, pick up pending tasks by priority</li> <li>Check system health (disk, memory, CPU) \u2014 alert if critical</li> <li>Check for any missed scheduled jobs</li> <li>Check monitored services</li> </ol> <p>Edit <code>~/.vandelay/workspace/HEARTBEAT.md</code> to customize what the agent checks.</p>"},{"location":"guides/scheduling/#next-steps","title":"Next Steps","text":"<ul> <li>CLI Reference: cron - Full cron command reference</li> <li>Deployment - Run scheduling 24/7 on a VPS</li> </ul>"},{"location":"guides/telegram-setup/","title":"Telegram Setup","text":"<p>Connect your Vandelay agent to Telegram so you can chat from your phone.</p>"},{"location":"guides/telegram-setup/#step-1-create-a-bot","title":"Step 1: Create a Bot","text":"<ol> <li>Open Telegram and message @BotFather</li> <li>Send <code>/newbot</code></li> <li>Choose a name and username for your bot</li> <li>Copy the bot token BotFather gives you</li> </ol>"},{"location":"guides/telegram-setup/#step-2-configure-vandelay","title":"Step 2: Configure Vandelay","text":"<pre><code>vandelay config  # \u2192 Channels \u2192 Telegram \u2192 Enable\n</code></pre> <p>Or add to <code>~/.vandelay/.env</code>:</p> <pre><code>TELEGRAM_TOKEN=your-bot-token-here\nTELEGRAM_CHAT_ID=your-chat-id    # optional but recommended\n</code></pre> <p>And in <code>config.json</code>:</p> <pre><code>{\n  \"channels\": {\n    \"telegram_enabled\": true,\n    \"telegram_chat_id\": \"123456789\"\n  }\n}\n</code></pre>"},{"location":"guides/telegram-setup/#step-3-get-your-chat-id","title":"Step 3: Get Your Chat ID","text":"<p>To lock the bot to your chat only (recommended for security):</p> <ol> <li>Start a conversation with your bot and send any message</li> <li>Open this URL in your browser (replace with your token):    <pre><code>https://api.telegram.org/bot&lt;YOUR_TOKEN&gt;/getUpdates\n</code></pre></li> <li>Find your chat ID in the response:    <pre><code>{\"message\": {\"chat\": {\"id\": 123456789, ...}}}\n</code></pre></li> <li>Add it to <code>~/.vandelay/.env</code>:    <pre><code>TELEGRAM_CHAT_ID=123456789\n</code></pre></li> </ol>"},{"location":"guides/telegram-setup/#step-4-start-the-server","title":"Step 4: Start the Server","text":"<pre><code>vandelay start\n</code></pre> <p>The Telegram webhook is automatically registered when the server starts.</p>"},{"location":"guides/telegram-setup/#features","title":"Features","text":"<ul> <li>Persistent typing: The bot shows \"typing...\" while processing (re-sent every 4s)</li> <li>File sending: The agent can send files via Telegram using <code>send_file()</code></li> <li>Chat lock: Set <code>telegram_chat_id</code> to restrict access to your chat only</li> <li>Shared memory: Conversations in Telegram share memory with Terminal and other channels</li> </ul>"},{"location":"guides/telegram-setup/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Bot not responding: Check that <code>telegram_enabled</code> is <code>true</code> and the token is correct</li> <li>Webhook errors: Ensure your server is publicly accessible (use a reverse proxy or tunnel)</li> <li>\"Chat not allowed\": Verify your <code>telegram_chat_id</code> matches the chat you're messaging from</li> </ul>"},{"location":"guides/tui-guide/","title":"TUI Dashboard Guide","text":"<p>Vandelay's primary interface is a terminal dashboard built with Textual. Run <code>vandelay</code> (with no arguments) to open it.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Vandelay  v0.x.x        [Restart] [Quit]               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Chat \u2502 Status \u2502 Config \u2502 Agents \u2502 Scheduler \u2502 Knowledge \u2502\n\u2502  Memory \u2502 Workspace                                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                          \u2502\n\u2502  (tab content)                                           \u2502\n\u2502                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/tui-guide/#first-run-onboarding-wizard","title":"First Run \u2014 Onboarding Wizard","text":"<p>On first launch, a welcome modal appears with two options:</p> <ul> <li>Get Started \u2014 opens the 5-step onboarding wizard</li> <li>I know what I'm doing \u2014 skips to the Config tab for manual setup</li> </ul>"},{"location":"guides/tui-guide/#onboarding-steps","title":"Onboarding Steps","text":"Step What to do 1. Name Enter your agent's name (default: Art) 2. Provider Select your AI provider (Anthropic, OpenAI, Google, Ollama, etc.) 3. Auth Enter your API key, or select Codex OAuth for OpenAI Codex 4. Model Choose a model from the live catalog for your provider 5. Timezone Confirm your timezone (auto-detected from system) <p>Pressing Finish saves <code>~/.vandelay/config.json</code>, writes your API key to <code>~/.vandelay/.env</code>, and initialises the workspace. The TUI lands on the Chat tab ready to use.</p>"},{"location":"guides/tui-guide/#tab-reference","title":"Tab Reference","text":""},{"location":"guides/tui-guide/#chat","title":"Chat","text":"<p>Send messages to your agent and receive streamed responses in real time. The Chat tab connects to the running server via WebSocket.</p> <ul> <li>Start the server first: <code>vandelay start --server</code> in a separate terminal, or install the daemon with <code>vandelay daemon install &amp;&amp; vandelay daemon start</code></li> <li>If the server is not running, the Chat tab shows a connection error</li> <li>Responses are rendered as Markdown</li> </ul>"},{"location":"guides/tui-guide/#status","title":"Status","text":"<p>Live health overview:</p> <ul> <li>Agent name, model, provider, version</li> <li>Server URL and connection state</li> <li>Heartbeat last-run time and status</li> <li>Channel connection state (Telegram, WhatsApp)</li> <li>Team members and their status</li> </ul>"},{"location":"guides/tui-guide/#config","title":"Config","text":"<p>Edit all settings without touching config files. Organised into sections:</p> <p>General - Agent name, user ID, timezone, workspace directory</p> <p>Model - Provider, model ID, auth method, API key</p> <p>Server - Host, port, database URL (SQLite path or <code>postgresql://</code> URL) - Daemon controls: Install / Uninstall service - Update Vandelay button (runs <code>git pull + uv sync + restart</code>) - Daemon Logs viewer (refresh to pull latest)</p> <p>Heartbeat - Enable/disable, interval (minutes), active hours, timezone</p> <p>Safety - Safety mode (strict / normal / off)</p> <p>Press Save in any section to persist changes. Changes that require a server restart (model, port, etc.) take effect after restarting.</p>"},{"location":"guides/tui-guide/#agents","title":"Agents","text":"<p>Manage the leader and team members.</p> <p>Leader \u2014 subnav sections: - Name \u2014 agent name and user ID - Model \u2014 provider, model, auth method - Team \u2014 enable/disable team mode, select coordination mode (coordinate / route / broadcast / tasks) - Tools \u2014 add/remove tools, assign to members - Instructions \u2014 edit SOUL.md directly</p> <p>Members \u2014 click any member or + Add Agent to: - Set name, role, model (with optional per-member provider override) - Assign tools - Write custom instructions or pick a starter template - Delete a member</p>"},{"location":"guides/tui-guide/#scheduler","title":"Scheduler","text":"<p>Manage cron jobs and view task history.</p> <p>Cron tab: - Table of all scheduled jobs: Name, Expression, Next Run, Last Run, Status, Type - Toolbar: Add, Edit, Enable/Disable, Delete - Heartbeat row is shown but cannot be edited or deleted (managed automatically) - Add / Edit modal: set Name, Cron Expression (5-field standard cron), Command, Timezone</p> <p>Tasks tab: - Table of all queued tasks: ID, Created, Status, Command - Refresh \u2014 reload from disk - Clear Completed \u2014 remove done/failed entries</p>"},{"location":"guides/tui-guide/#knowledge","title":"Knowledge","text":"<p>Manage the agent's RAG knowledge base.</p> <ul> <li>Enable/Disable knowledge toggle</li> <li>Status \u2014 shows document count and last-indexed time</li> <li>Add Document \u2014 provide a file path or URL; select which agents to index it for (defaults to all: Shared + every team member)</li> <li>Refresh Corpus \u2014 re-index all documents</li> <li>Clear Knowledge Base \u2014 remove all indexed documents</li> </ul>"},{"location":"guides/tui-guide/#memory","title":"Memory","text":"<p>View and manage agent memories stored in the database.</p> <ul> <li>Table columns: ID, Topics, Memory (truncated), Created</li> <li>Refresh \u2014 reload from database</li> <li>Delete Selected \u2014 delete the highlighted memory row</li> <li>Clear All \u2014 remove all memories (with confirmation)</li> </ul> <p>This tab shows Agno's agentic memory records \u2014 facts and context the agent has extracted and stored from conversations.</p>"},{"location":"guides/tui-guide/#workspace","title":"Workspace","text":"<p>Edit the six workspace markdown files that compose the agent's system prompt.</p> <p>File picker on the left:</p> File Purpose SOUL.md Core personality and communication style USER.md Information about you: name, role, preferences AGENTS.md Team delegation rules TOOLS.md Tool usage guidance and best practices HEARTBEAT.md Checklist for periodic wake-ups BOOTSTRAP.md One-time startup instructions (auto-deleted after first read) <p>Select a file to edit it. Changes are saved immediately and take effect on the next agent reload.</p>"},{"location":"guides/tui-guide/#header-controls","title":"Header Controls","text":"Control Action Restart Restart the running daemon (or server) to apply config changes Quit Exit the TUI (does not stop the daemon or server)"},{"location":"guides/tui-guide/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Key Action <code>Tab</code> / <code>Shift+Tab</code> Move between tabs <code>Enter</code> Confirm / activate <code>Escape</code> Close modal / cancel <code>Ctrl+C</code> Quit"},{"location":"guides/workspace-files/","title":"Workspace Files","text":"<p>Vandelay assembles the agent's system prompt from six markdown files in <code>~/.vandelay/workspace/</code>. Each file controls a different aspect of agent behavior.</p>"},{"location":"guides/workspace-files/#file-reference","title":"File Reference","text":""},{"location":"guides/workspace-files/#soulmd","title":"SOUL.md","text":"<p>The agent's core personality and communication style.</p> <ul> <li>Defines tone, formality, language preferences</li> <li>Sets behavioral rules (e.g., \"always confirm before destructive actions\")</li> <li>This is the most important file; it shapes how the agent acts</li> </ul>"},{"location":"guides/workspace-files/#usermd","title":"USER.md","text":"<p>Information about you, the user.</p> <ul> <li>Name, role, preferences</li> <li>Project context and goals</li> <li>Personal details the agent should know</li> </ul>"},{"location":"guides/workspace-files/#agentsmd","title":"AGENTS.md","text":"<p>Team delegation rules.</p> <ul> <li>Defines which specialist handles which task type</li> <li>Controls how the supervisor routes requests</li> <li>Only relevant when team mode is enabled</li> </ul>"},{"location":"guides/workspace-files/#toolsmd","title":"TOOLS.md","text":"<p>Tool usage guidance.</p> <ul> <li>Best practices per tool</li> <li>When to use which tool</li> <li>Tool-specific instructions (e.g., \"always use --verbose with shell commands\")</li> </ul>"},{"location":"guides/workspace-files/#heartbeatmd","title":"HEARTBEAT.md","text":"<p>Proactive tasks for the heartbeat system.</p> <ul> <li>Loaded into the system prompt so the agent knows its checklist without runtime file reads</li> <li>When the scheduler fires a heartbeat, the agent runs through this file and responds <code>HEARTBEAT_OK</code> or alerts you if something needs attention</li> <li>Default checklist: check open tasks, system health, missed jobs, monitored services</li> <li>Only active when heartbeat is enabled in config</li> </ul>"},{"location":"guides/workspace-files/#bootstrapmd","title":"BOOTSTRAP.md","text":"<p>One-time startup instructions.</p> <ul> <li>Included in the system prompt exactly once \u2014 the system auto-deletes it on first read</li> <li>Use this for a welcome message, initial setup tasks, or anything the agent should do exactly once</li> <li>To run bootstrap again (e.g. after a fresh install), copy the default template back: <code>cp $(python -c \"import vandelay; print(vandelay.__file__.replace('__init__.py',''))\")workspace/templates/BOOTSTRAP.md ~/.vandelay/workspace/BOOTSTRAP.md</code></li> </ul>"},{"location":"guides/workspace-files/#editing","title":"Editing","text":"<p>Edit any file directly:</p> <pre><code>nano ~/.vandelay/workspace/SOUL.md\n</code></pre> <p>Or ask the agent to update its own workspace files. It has <code>WorkspaceTools</code> for reading and writing these files directly.</p> <p>Changes take effect on the next agent reload (automatic when using <code>WorkspaceTools</code>).</p>"},{"location":"guides/workspace-files/#default-templates","title":"Default Templates","text":"<p>On first <code>vandelay onboard</code>, default templates are written for each file. These provide a reasonable starting point that you can customize over time.</p> <p>If a workspace file exists but is empty, Vandelay automatically falls back to the shipped default template \u2014 so template updates propagate without requiring you to delete your file.</p>"},{"location":"guides/workspace-files/#memory","title":"Memory","text":"<p>The agent's persistent memory is stored in the database (<code>~/.vandelay/data/vandelay.db</code>), not in a workspace file. To view or clear memories, use the Memory tab in the TUI or the <code>vandelay memory</code> CLI commands.</p>"},{"location":"tools/","title":"Tool Catalog","text":"<p>Vandelay supports 100+ tools from Agno's ecosystem, grouped by category. Enable any tool with <code>vandelay tools enable &lt;slug&gt;</code>. For full details on each toolkit, see the Agno Toolkit Index.</p>"},{"location":"tools/#categories","title":"Categories","text":""},{"location":"tools/#search-web","title":"Search &amp; Web","text":"Tool Slug Pricing Description Tavily <code>tavily</code> API key AI-powered web search DuckDuckGo <code>duckduckgo</code> Free Web search Exa <code>exa</code> API key Neural search engine SerpAPI <code>serpapi</code> API key Google search results Crawl4AI <code>crawl4ai</code> Free Web page crawling and extraction Newspaper4k <code>newspaper4k</code> Free Article extraction ArXiv <code>arxiv</code> Free Academic paper search Wikipedia <code>wikipedia</code> Free Wikipedia search HackerNews <code>hackernews</code> Free Hacker News stories"},{"location":"tools/#communication","title":"Communication","text":"Tool Slug Pricing Description Gmail <code>gmail</code> Google OAuth Email read/send/search Slack <code>slack</code> API token Slack messaging Discord <code>discord</code> Bot token Discord messaging Twilio <code>twilio</code> API key SMS and voice"},{"location":"tools/#productivity","title":"Productivity","text":"Tool Slug Pricing Description Google Calendar <code>googlecalendar</code> Google OAuth Calendar management Google Drive <code>googledrive</code> Google OAuth File storage Google Sheets <code>googlesheets</code> Google OAuth Spreadsheets Notion <code>notion</code> API key Workspace and docs Linear <code>linear</code> API key Issue tracking Todoist <code>todoist</code> API key Task management"},{"location":"tools/#development","title":"Development","text":"Tool Slug Pricing Description GitHub <code>github</code> Token Repos, issues, PRs GitLab <code>gitlab</code> Token Repos, issues, MRs"},{"location":"tools/#data-analytics","title":"Data &amp; Analytics","text":"Tool Slug Pricing Description SQL <code>sql</code> Free Database queries Pandas <code>pandas</code> Free Data analysis Matplotlib <code>matplotlib</code> Free Chart generation"},{"location":"tools/#ai-models","title":"AI &amp; Models","text":"Tool Slug Pricing Description OpenBB <code>openbb</code> Free/API Financial data Replicate <code>replicate</code> API key ML model inference"},{"location":"tools/#enabling-tools","title":"Enabling Tools","text":"<pre><code># Enable one or more tools\nvandelay tools enable shell file python tavily\n\n# Disable a tool\nvandelay tools disable tavily\n\n# List enabled tools\nvandelay tools list\n\n# Search available tools\nvandelay tools search \"search\"\n</code></pre>"},{"location":"tools/#pricing-notes","title":"Pricing Notes","text":"<ul> <li>Free: No API key needed, runs locally</li> <li>API key: Requires a third-party API key (stored in <code>~/.vandelay/.env</code>)</li> <li>Google OAuth: Uses unified Google OAuth flow (<code>vandelay auth-google</code>)</li> </ul> <p>See Built-in Tools for Vandelay's custom toolkits.</p>"},{"location":"tools/built-in/","title":"Built-in Tools","text":"<p>These are Vandelay's custom toolkits, built specifically for the platform rather than sourced from Agno's third-party ecosystem.</p>"},{"location":"tools/built-in/#system-tools","title":"System Tools","text":""},{"location":"tools/built-in/#shell-shell","title":"Shell (<code>shell</code>)","text":"<p>Execute shell commands on the host system.</p> <ul> <li>Runs commands via subprocess</li> <li>Respects safety mode (trust/confirm/tiered)</li> <li>Blocked patterns prevent dangerous commands</li> <li>Configurable timeout (default: 120s)</li> </ul>"},{"location":"tools/built-in/#file-file","title":"File (<code>file</code>)","text":"<p>File system operations.</p> <ul> <li>Read, write, list, search files</li> <li>Write allowlist prevents modifications to protected paths</li> <li><code>src/vandelay/</code> is blocked by default</li> </ul>"},{"location":"tools/built-in/#python-python","title":"Python (<code>python</code>)","text":"<p>Execute Python code.</p> <ul> <li>Runs in a subprocess</li> <li>Access to installed packages</li> <li>Output captured and returned to agent</li> </ul>"},{"location":"tools/built-in/#browser-tools","title":"Browser Tools","text":""},{"location":"tools/built-in/#camoufox-camoufox","title":"Camoufox (<code>camoufox</code>)","text":"<p>Anti-detect Firefox browser via Camoufox.</p> <ul> <li>Playwright API (no Node.js needed)</li> <li>Lazy-starts browser on first use</li> <li>Navigate, screenshot, extract content, fill forms</li> <li>Anti-fingerprinting built in</li> </ul>"},{"location":"tools/built-in/#scheduling-notifications","title":"Scheduling &amp; Notifications","text":""},{"location":"tools/built-in/#scheduler-injected","title":"Scheduler (injected)","text":"<p>Cron job management. Automatically injected (not enabled via <code>tools enable</code>).</p> <ul> <li><code>schedule_job()</code>: Create a cron job</li> <li><code>list_scheduled_jobs()</code>: List all jobs</li> <li><code>get_job_details()</code>: Get job info</li> <li><code>pause_scheduled_job()</code> / <code>resume_scheduled_job()</code>: Toggle jobs</li> <li><code>delete_scheduled_job()</code>: Remove a job</li> </ul>"},{"location":"tools/built-in/#notify-injected","title":"Notify (injected)","text":"<p>Send proactive messages to the user. Automatically injected when a channel router is available.</p> <ul> <li><code>notify_user()</code>: Send a message to the user's active channel</li> <li><code>send_file()</code>: Send a file via the active channel</li> </ul>"},{"location":"tools/built-in/#agent-management","title":"Agent Management","text":""},{"location":"tools/built-in/#workspace-injected","title":"Workspace (injected)","text":"<p>Read and write workspace files (<code>SOUL.md</code>, <code>USER.md</code>, etc.).</p>"},{"location":"tools/built-in/#tool-management-injected","title":"Tool Management (injected)","text":"<p>Enable, disable, and search tools at runtime.</p>"},{"location":"tools/built-in/#member-management-injected","title":"Member Management (injected)","text":"<p>Add, remove, and update team members at runtime.</p>"},{"location":"tools/built-in/#task-queue-injected","title":"Task Queue (injected)","text":"<p>Track work across sessions. Tasks persist to <code>~/.vandelay/task_queue.json</code> and survive restarts.</p> <ul> <li><code>create_task(title, description, priority, owner)</code>: Create a task, optionally assign to a team member</li> <li><code>check_open_tasks()</code>: List all pending and in-progress tasks sorted by priority \u2014 called automatically on heartbeat</li> <li><code>update_task(task_id, status, result)</code>: Update progress</li> <li><code>complete_task(task_id, result)</code>: Mark done with a summary</li> <li><code>cancel_task(task_id, reason)</code>: Cancel with a reason</li> </ul> <p>Priority: 0 = normal, 1 = high, 2 = urgent</p>"},{"location":"tools/built-in/#deep-work-injected","title":"Deep Work (injected)","text":"<p>Launch autonomous background work sessions. Configurable via <code>deep_work</code> config.</p>"},{"location":"tutorials/","title":"Tutorials","text":"<p>Step-by-step walkthroughs for building real things with Vandelay. Unlike the Guides, tutorials are narrative and hand-held \u2014 start at the top, follow along, and you'll have something working by the end.</p>"},{"location":"tutorials/#available-tutorials","title":"Available Tutorials","text":"Tutorial What you'll build Building a Toolkit A full browser automation toolkit using CamoufoxTools as the worked example"},{"location":"tutorials/#coming-soon","title":"Coming Soon","text":"<ul> <li>Deploying Vandelay to a VPS from scratch</li> <li>Building a team of specialist agents</li> <li>Adding a custom AI model provider</li> <li>Writing a channel integration (Slack, Discord)</li> </ul>"},{"location":"tutorials/building-a-toolkit/","title":"Building a Full Toolkit","text":"<p>This guide walks through building a production-quality Vandelay toolkit from scratch, using CamoufoxTools \u2014 the browser automation toolkit built into Vandelay \u2014 as the worked example. By the end you'll understand:</p> <ul> <li>How Agno discovers and formats tools for the model</li> <li>Why sync vs async functions matters</li> <li>How to write parameter schemas that agents understand</li> <li>How to test the full pipeline end-to-end</li> </ul>"},{"location":"tutorials/building-a-toolkit/#what-is-camoufoxtools","title":"What is CamoufoxTools?","text":"<p>CamoufoxTools wraps Camoufox \u2014 an open-source anti-detect Firefox browser with a Playwright API. It gives agents a persistent browser session with named tabs:</p> <pre><code>open_tab(url)         \u2192 opens URL, returns page content\nnavigate(tab_id, url) \u2192 navigate existing tab\nget_page_content(tab_id) \u2192 full page text / accessibility tree\nclick(tab_id, selector)  \u2192 click an element\ntype_text(tab_id, selector, text) \u2192 fill an input\nscreenshot(tab_id, path) \u2192 save a PNG screenshot\nscroll(tab_id, direction) \u2192 scroll the page\nget_links(tab_id)     \u2192 list all links on page\nclose_tab(tab_id)     \u2192 close a tab\nlist_tabs()           \u2192 list all open tabs\n</code></pre>"},{"location":"tutorials/building-a-toolkit/#step-1-scaffold-the-toolkit","title":"Step 1: Scaffold the Toolkit","text":"<pre><code># src/vandelay/tools/camoufox.py\n\nfrom agno.tools import Toolkit\n\nclass CamoufoxTools(Toolkit):\n    def __init__(self, headless: bool = True) -&gt; None:\n        super().__init__(name=\"camoufox\")\n        self._headless = headless\n        self._browser = None   # lazy: started on first use\n        self._context = None\n        self._pages: dict[str, object] = {}\n        self._counter = 0\n\n        # Register every public function\n        self.register(self.open_tab)\n        self.register(self.navigate)\n        # ... etc\n</code></pre> <p>Two things happen here:</p> <ol> <li><code>super().__init__(name=\"camoufox\")</code> \u2014 the <code>name</code> is the slug used in config    and <code>enabled_tools</code> (e.g. <code>vandelay tools enable camoufox</code>)</li> <li><code>self.register(fn)</code> \u2014 adds the function to <code>self.functions</code> (the sync registry)</li> </ol>"},{"location":"tutorials/building-a-toolkit/#step-2-write-sync-functions","title":"Step 2: Write Sync Functions","text":"<p>Every registered function must be a regular <code>def</code>. This is the most common mistake when writing Agno toolkits.</p>"},{"location":"tutorials/building-a-toolkit/#why-it-matters-how-agno-registers-tools","title":"Why it matters: How Agno registers tools","text":"<p>Agno's <code>Toolkit.register()</code> checks whether the function is a coroutine:</p> <pre><code># Agno internals (simplified)\ndef register(self, fn):\n    if asyncio.iscoroutinefunction(fn):\n        self.async_functions[fn.__name__] = Function(fn)\n    else:\n        self.functions[fn.__name__] = Function(fn)\n</code></pre>"},{"location":"tutorials/building-a-toolkit/#why-it-matters-how-agents-format-tools-for-the-model","title":"Why it matters: How agents format tools for the model","text":"<p>When an agent prepares its tool list to include in the model request, it calls:</p> <pre><code># Agno internals (simplified)\ndef parse_tools(tools, async_mode=False):\n    for tool in tools:\n        if isinstance(tool, Toolkit):\n            fns = tool.get_async_functions() if async_mode else tool.get_functions()\n</code></pre> <p><code>get_functions()</code> returns only <code>self.functions</code>. <code>get_async_functions()</code> returns <code>{**self.functions, **self.async_functions}</code> \u2014 sync first, async overrides.</p> <p>The model's tool formatting path calls <code>get_functions()</code> by default. If your functions are <code>async def</code>, they live in <code>self.async_functions</code> and are never forwarded to the model. The agent receives no tools.</p>"},{"location":"tutorials/building-a-toolkit/#the-fix-use-sync-api-asynciorun-if-needed","title":"The fix: use sync API + <code>asyncio.run()</code> if needed","text":"<pre><code>def open_tab(self, url: str) -&gt; str:\n    \"\"\"Open a new browser tab and navigate to the given URL.\n\n    Args:\n        url: The URL to open.\n\n    Returns:\n        Tab ID and a text summary of the page content.\n    \"\"\"\n    self._ensure_browser()\n    page = self._context.new_page()\n    tab_id = self._next_tab_id()\n    self._pages[tab_id] = page\n    page.goto(url, wait_until=\"domcontentloaded\", timeout=30000)\n    title = page.title()\n    text = page.inner_text(\"body\")[:3000].strip()\n    return f\"Tab {tab_id} opened: {title}\\n\\n{text}\"\n</code></pre> <p>The Camoufox library ships both sync and async APIs. We use <code>camoufox.sync_api.Camoufox</code> to keep the code straightforward. If you were wrapping an async library, you'd use <code>asyncio.run()</code> inside the sync function.</p>"},{"location":"tutorials/building-a-toolkit/#step-3-lazy-browser-initialisation","title":"Step 3: Lazy Browser Initialisation","text":"<p>Starting a browser is expensive \u2014 don't do it in <code>__init__</code>. Use a <code>_ensure_browser()</code> helper that starts the browser only on first use:</p> <pre><code>def _ensure_browser(self) -&gt; None:\n    \"\"\"Lazy-start the Camoufox browser on first use.\"\"\"\n    if self._context is not None:\n        return                                    # already running\n\n    from camoufox.sync_api import Camoufox       # deferred import\n\n    self._browser = Camoufox(headless=self._headless)\n    self._context = self._browser.__enter__()    # sync context manager\n</code></pre> <p>Benefits: - Server starts fast even if the agent never uses the browser - Dependencies are imported only when needed - Easy to test the toolkit class without a real browser</p>"},{"location":"tutorials/building-a-toolkit/#step-4-write-docstrings-that-agents-understand","title":"Step 4: Write Docstrings That Agents Understand","text":"<p>Agno parses your <code>Args:</code> blocks to populate the JSON schema's <code>description</code> fields. The model reads these descriptions to know what to pass.</p> <pre><code>def click(self, tab_id: str, selector: str) -&gt; str:\n    \"\"\"Click an element by CSS selector or text.\n\n    Args:\n        tab_id: The tab identifier returned by open_tab (e.g. 'tab1').\n        selector: CSS selector or Playwright text selector\n                  (e.g. '#submit-btn', 'text=Login', '[data-testid=search]').\n\n    Returns:\n        Confirmation message with the page title after the click.\n    \"\"\"\n</code></pre> <p>When the agent calls <code>click</code>, the model knows: - <code>tab_id</code> \u2192 the identifier returned by a previous <code>open_tab</code> call - <code>selector</code> \u2192 a CSS or text selector string, with concrete examples</p> <p>Bad docstring: <pre><code>def click(self, tab_id: str, selector: str) -&gt; str:\n    \"\"\"Click.\"\"\"  # agent has no idea what to pass\n</code></pre></p>"},{"location":"tutorials/building-a-toolkit/#step-5-handle-errors-gracefully","title":"Step 5: Handle Errors Gracefully","text":"<p>Return error strings, never raise exceptions:</p> <pre><code>def navigate(self, tab_id: str, url: str) -&gt; str:\n    \"\"\"Navigate an existing tab to a new URL.\"\"\"\n    page = self._pages.get(tab_id)\n    if not page:\n        return f\"Tab {tab_id} not found. Use open_tab() to open a tab first.\"\n\n    try:\n        page.goto(url, wait_until=\"domcontentloaded\", timeout=30000)\n    except Exception as e:\n        return f\"Navigation failed: {e}\"\n\n    return f\"Navigated {tab_id} to: {page.title()} ({url})\"\n</code></pre> <p>The agent reads the return value as text. If you return a clear error message, the agent can recover (\"Let me open a tab first\"). If you raise, the agent sees a Python traceback \u2014 unreadable and non-actionable.</p>"},{"location":"tutorials/building-a-toolkit/#step-6-clean-up-resources","title":"Step 6: Clean Up Resources","text":"<p>Implement a <code>close()</code> method for graceful shutdown. Vandelay calls this during server shutdown if your toolkit is registered:</p> <pre><code>def close(self) -&gt; None:\n    \"\"\"Shut down the browser. Called during server shutdown.\"\"\"\n    for page in list(self._pages.values()):\n        with contextlib.suppress(Exception):\n            page.close()\n    self._pages.clear()\n\n    if self._browser is not None:\n        with contextlib.suppress(Exception):\n            self._browser.__exit__(None, None, None)\n        self._browser = None\n        self._context = None\n</code></pre> <p>Use <code>contextlib.suppress</code> to swallow errors during teardown \u2014 the process is shutting down anyway and you don't want a cleanup exception to mask the real reason for shutdown.</p>"},{"location":"tutorials/building-a-toolkit/#step-7-test-the-full-pipeline","title":"Step 7: Test the Full Pipeline","text":"<p>Test three things: registration, parameter schema extraction, and runtime behaviour.</p> <pre><code># tests/test_tools/test_camoufox.py\nfrom unittest.mock import MagicMock, patch\nfrom vandelay.tools.camoufox import CamoufoxTools\n\n# --- Registration tests ---\n\ndef test_functions_registered_as_sync():\n    \"\"\"All functions must be in self.functions, not async_functions.\"\"\"\n    tool = CamoufoxTools()\n    expected = {\n        \"open_tab\", \"navigate\", \"get_page_content\", \"click\",\n        \"type_text\", \"screenshot\", \"scroll\", \"get_links\",\n        \"close_tab\", \"list_tabs\",\n    }\n    assert set(tool.functions.keys()) == expected\n\ndef test_no_async_functions():\n    \"\"\"async_functions must be empty \u2014 async fns are invisible to agents.\"\"\"\n    tool = CamoufoxTools()\n    assert tool.async_functions == {}\n\n# --- Schema tests ---\n\ndef test_parameter_schema_is_extracted():\n    \"\"\"Agno must be able to extract the full parameter schema.\"\"\"\n    tool = CamoufoxTools()\n    func = tool.functions[\"open_tab\"].model_copy(deep=True)\n    func.process_entrypoint(strict=False)\n    schema = func.to_dict()\n\n    assert schema[\"name\"] == \"open_tab\"\n    props = schema[\"parameters\"][\"properties\"]\n    assert \"url\" in props\n    assert props[\"url\"][\"type\"] == \"string\"\n    assert \"url\" in schema[\"parameters\"][\"required\"]\n\ndef test_all_functions_have_parameters():\n    \"\"\"Every function except list_tabs should have typed parameters.\"\"\"\n    tool = CamoufoxTools()\n    no_params_allowed = {\"list_tabs\"}\n    for name, func in tool.functions.items():\n        f = func.model_copy(deep=True)\n        f.process_entrypoint(strict=False)\n        schema = f.to_dict()\n        props = schema[\"parameters\"].get(\"properties\", {})\n        if name not in no_params_allowed:\n            assert props, f\"{name} has no parameter schema \u2014 check type annotations\"\n\n# --- Runtime tests ---\n\ndef test_list_tabs_empty():\n    tool = CamoufoxTools()\n    assert tool.list_tabs() == \"No open tabs.\"\n\ndef test_navigate_unknown_tab():\n    tool = CamoufoxTools()\n    result = tool.navigate(\"tab99\", \"https://example.com\")\n    assert \"not found\" in result\n\ndef test_open_tab_launches_browser(mock_camoufox):\n    \"\"\"open_tab should lazy-start the browser and return page content.\"\"\"\n    tool = CamoufoxTools()\n    with patch(\"camoufox.sync_api.Camoufox\") as MockCamoufox:\n        mock_ctx = MagicMock()\n        mock_page = MagicMock()\n        mock_page.title.return_value = \"Example Domain\"\n        mock_page.inner_text.return_value = \"Example Domain content\"\n        mock_ctx.new_page.return_value = mock_page\n        MockCamoufox.return_value.__enter__ = MagicMock(return_value=mock_ctx)\n        MockCamoufox.return_value.__exit__ = MagicMock(return_value=False)\n\n        result = tool.open_tab(\"https://example.com\")\n\n    assert \"tab1\" in result\n    assert \"Example Domain\" in result\n</code></pre> <p>Run with: <pre><code>uv run pytest tests/test_tools/test_camoufox.py -v\n</code></pre></p>"},{"location":"tutorials/building-a-toolkit/#step-8-register-with-the-tool-manager","title":"Step 8: Register with the Tool Manager","text":"<p>Add your toolkit to <code>src/vandelay/tools/manager.py</code>:</p> <pre><code># In the TOOL_REGISTRY or equivalent\nToolEntry(\n    name=\"camoufox\",\n    display_name=\"Camoufox Browser\",\n    description=\"Anti-detect Firefox browser automation via Camoufox + Playwright\",\n    category=\"browser\",\n    class_name=\"CamoufoxTools\",\n    module=\"vandelay.tools.camoufox\",\n    dependencies=[\"camoufox[geoip]\"],\n    is_builtin=True,\n)\n</code></pre> <p>Then enable it: <pre><code>vandelay tools enable camoufox\n</code></pre></p> <p>Or add it to a member's tools in <code>~/.vandelay/config.json</code>: <pre><code>{\n  \"name\": \"cto\",\n  \"tools\": [\"camoufox\", \"shell\", \"file\", \"python\"]\n}\n</code></pre></p>"},{"location":"tutorials/building-a-toolkit/#debugging-tools-not-working","title":"Debugging Tools Not Working","text":"<p>If an agent says it \"can't find\" or \"doesn't have access to\" your tool, check these in order:</p> <ol> <li> <p>Are functions sync? <pre><code>assert tool.async_functions == {}  # must be empty\nassert \"my_function\" in tool.functions\n</code></pre></p> </li> <li> <p>Does <code>process_entrypoint()</code> extract the schema? <pre><code>func = tool.functions[\"my_function\"].model_copy(deep=True)\nfunc.process_entrypoint(strict=False)\nprint(func.to_dict())  # should show parameters\n</code></pre></p> </li> <li> <p>Does the tool appear in the AgentOS API? <pre><code>curl http://localhost:8000/teams | python -c \"\nimport sys, json\nteams = json.load(sys.stdin)\nfor t in teams:\n    for m in t.get('members', []):\n        print(m['name'], [fn['name'] for fn in m['tools']['tools'][:5]])\n\"\n</code></pre></p> </li> <li> <p>Check the startup warnings: <pre><code>vandelay daemon logs | grep -i \"camoufox\\|warning\\|error\"\n</code></pre>    Errors like <code>\"GOOGLE_AUTH_PORT is not set\"</code> or <code>\"scope gmail.compose required\"</code>    indicate the tool was skipped at startup.</p> </li> <li> <p>Are the dependencies installed? <pre><code>uv run python -m camoufox fetch  # downloads GeoIP DB (required)\nuv run python -c \"import camoufox; print('ok')\"\n</code></pre></p> </li> </ol>"},{"location":"tutorials/building-a-toolkit/#full-source-camoufoxtools","title":"Full Source: CamoufoxTools","text":"<p>The complete implementation lives at <code>src/vandelay/tools/camoufox.py</code>.</p> <p>Key design decisions: - Sync API (<code>camoufox.sync_api</code>) for full agent visibility - Named tab dict (<code>self._pages</code>) so agents can manage multiple pages - Accessibility tree snapshot as primary content extraction (falls back to <code>inner_text</code>) - <code>contextlib.suppress</code> on all cleanup paths</p>"},{"location":"tutorials/building-a-toolkit/#next-steps","title":"Next Steps","text":"<ul> <li>Custom Tools Overview \u2014 quick reference</li> <li>Built-in Tools \u2014 all Vandelay-native toolkits</li> <li>Agent Templates \u2014 pre-built agent configs that use these tools</li> </ul>"}]}